<!DOCTYPE html>
<html lang="es">
<head>
  <!-- Fuentes locales como fallback -->
<style>
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');

/* Fallback a fuentes del sistema si Google Fonts falla */
body {
  font-family: 'Poppins', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
}

/* Si no carga Poppins, usar fuentes del sistema */
@supports not (font-variation-settings: normal) {
  body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  }
}
</style>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes" />
  <title>Sistema de Inventario - Pac√≠fica Resort Ixtapa</title>

  <!-- Fuente -->

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  <!-- Favicon del hotel -->
  <link rel="icon" type="image/x-icon" href="https://img.icons8.com/color/96/000000/resort.png">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üè®</text></svg>">
  <style>
    /* ========== ESTILOS RESPONSIVOS NUEVOS ========== */
    /* Breakpoints principales */
    /* Tel√©fonos peque√±os: 320px-480px */
    /* Tel√©fonos grandes: 481px-768px */
    /* Tablets: 769px-1024px */
    /* Desktop: 1025px+ */

    /* Ajustes generales para m√≥viles */
    @media (max-width: 768px) {
      /* Login Screen para m√≥vil */
      .login-card {
        padding: 25px 20px !important;
        margin: 15px;
        max-width: 100% !important;
        border-radius: 16px;
      }
      
      .hotel-logo {
        font-size: 36px !important;
        padding: 12px !important;
      }
      
      .hotel-name {
        font-size: 20px !important;
        line-height: 1.3;
      }
      
      .system-name {
        font-size: 16px !important;
        margin-bottom: 25px !important;
      }
      
      .form-input {
        padding: 16px !important;
        font-size: 16px !important; /* Evitar zoom en iOS */
      }
      
      .toggle-password {
        right: 18px !important;
        font-size: 22px !important;
      }
      
      .login-btn {
        padding: 18px !important;
        font-size: 17px !important;
      }
      
      /* Ajustes del header principal */
      .app-header {
        flex-direction: column !important;
        align-items: flex-start !important;
        gap: 15px !important;
      }
      
      .user-info {
        width: 100%;
        justify-content: space-between;
        margin-top: 10px;
      }
      
      .app-title {
        font-size: 1.3rem !important;
        line-height: 1.4;
      }
      
      .app-subtitle {
        font-size: 0.9rem !important;
      }
      
      /* Layout principal en m√≥vil */
      .layout {
        gap: 15px !important;
      }
      
      .card {
        padding: 20px 15px !important;
        border-radius: 16px !important;
      }
      
      .card-header {
        flex-direction: column;
        align-items: flex-start !important;
        gap: 10px !important;
      }
      
      /* Formulario en m√≥vil */
      .form-row {
        grid-template-columns: 1fr !important;
        gap: 15px !important;
      }
      
      input, select, textarea {
        font-size: 16px !important; /* Evitar zoom en iOS */
        padding: 14px 12px !important;
        border-radius: 12px !important;
      }
      
      textarea {
        min-height: 100px !important;
      }
      
      label {
        font-size: 14px !important;
        margin-bottom: 8px !important;
      }
      
      .btn-row {
        flex-direction: column;
        gap: 10px !important;
      }
      
      .btn {
        width: 100%;
        justify-content: center;
        padding: 16px !important;
        font-size: 16px !important;
        border-radius: 12px !important;
      }
      
      /* Toolbar y filtros en m√≥vil */
      .toolbar {
        flex-direction: column;
        align-items: stretch !important;
        gap: 12px !important;
      }
      
      .toolbar-left, .toolbar-right {
        width: 100% !important;
        flex-wrap: wrap !important;
      }
      
      .input-inline, .select-inline {
        max-width: 100% !important;
        min-width: 100% !important;
        margin-bottom: 8px;
      }
      
      #busqueda {
        order: -1; /* Buscar primero en m√≥vil */
      }
      
      /* Tabla en m√≥vil - convertir a cards */
      .table-scroll {
        max-height: none !important;
        overflow-x: auto;
        margin: 0 -15px;
        width: calc(100% + 30px);
      }
      
      table {
        min-width: 800px; /* Permitir scroll horizontal */
      }
      
      th, td {
        padding: 12px 10px !important;
        font-size: 14px !important;
      }
      
      /* Transformar tabla en cards para pantallas muy peque√±as */
      @media (max-width: 480px) {
        .table-scroll {
          border: none;
          background: transparent;
        }
        
        table {
          display: none; /* Ocultar tabla en m√≥viles muy peque√±os */
        }
        
        #empty-state {
          display: block !important;
          padding: 30px 20px;
          font-size: 16px;
        }
        
        /* Mostrar cards en lugar de tabla */
        .mobile-cards-container {
          display: block !important;
        }
      }
      
      /* Alertas y paneles en m√≥vil */
      .alerts-panel, .backup-panel {
        padding: 20px 15px !important;
        border-radius: 16px;
        margin-top: 25px;
      }
      
      .alerts-filter {
        overflow-x: auto;
        flex-wrap: nowrap;
        padding-bottom: 10px;
      }
      
      .filter-btn {
        padding: 10px 16px !important;
        font-size: 14px !important;
        white-space: nowrap;
      }
      
      .alert-item {
        flex-direction: column;
        align-items: flex-start;
        gap: 15px;
      }
      
      .alert-actions {
        width: 100%;
        justify-content: flex-end;
      }
      
      .backup-buttons {
        flex-direction: column;
        gap: 12px;
      }
      
      .backup-btn {
        width: 100%;
        padding: 14px !important;
        text-align: center;
      }
      
      /* Modal en m√≥vil */
      .modal {
        width: 90% !important;
        margin: 20px;
        padding: 25px 20px !important;
        border-radius: 20px;
      }
      
      .modal-footer {
        flex-direction: column;
        gap: 10px;
      }
      
      .modal-footer .btn {
        width: 100%;
      }
      
      /* Footer */
      .footer {
        text-align: center !important;
        padding-top: 20px;
        margin-top: 25px;
        border-top: 1px solid var(--card-border);
      }
      
      /* Ajustes para iOS espec√≠ficos */
      @supports (-webkit-touch-callout: none) {
        .login-screen {
          min-height: -webkit-fill-available;
        }
        
        input, select, textarea {
          font-size: 16px; /* Previene zoom autom√°tico en iOS */
        }
      }
    }

    /* Tablets (769px-1024px) */
    @media (min-width: 769px) and (max-width: 1024px) {
      .container {
        padding: 1.5rem !important;
      }
      
      .layout {
        gap: 20px !important;
      }
      
      .card {
        padding: 25px !important;
      }
      
      .app-header {
        flex-wrap: wrap;
      }
      
      .user-info {
        margin-top: 15px;
      }
      
      .form-row {
        gap: 15px !important;
      }
      
      .table-scroll {
        max-height: 500px;
      }
      
      th, td {
        padding: 12px 10px;
        font-size: 14px;
      }
    }

    /* Pantallas muy peque√±as (menos de 360px) */
    @media (max-width: 360px) {
      .login-card {
        padding: 20px 15px !important;
      }
      
      .hotel-name {
        font-size: 18px !important;
      }
      
      .app-title {
        font-size: 1.2rem !important;
      }
      
      .card-title {
        font-size: 1.1rem !important;
      }
      
      .btn {
        padding: 18px 15px !important;
        font-size: 15px !important;
      }
      
      .alert-details {
        flex-direction: column;
        gap: 5px;
      }
    }

    /* Pantallas grandes (m√°s de 1200px) */
    @media (min-width: 1200px) {
      .container {
        max-width: 1400px !important;
        padding: 2rem;
      }
      
      .layout {
        grid-template-columns: minmax(0, 1fr) minmax(0, 2fr) !important;
        gap: 2rem;
      }
      
      .table-scroll {
        max-height: 600px;
      }
    }

    /* Orientaci√≥n landscape para m√≥viles */
    @media (max-height: 600px) and (orientation: landscape) {
      .login-screen {
        padding: 10px;
      }
      
      .login-card {
        padding: 20px !important;
        max-width: 400px !important;
      }
      
      .hotel-branding {
        margin-bottom: 20px !important;
      }
      
      .form-group {
        margin-bottom: 15px !important;
      }
    }

    /* Mejoras de accesibilidad t√°ctil */
    @media (hover: none) and (pointer: coarse) {
      /* Elementos m√°s grandes para tacto */
      .btn, .backup-btn, .filter-btn, .alert-btn {
        min-height: 44px; /* Tama√±o m√≠nimo para dedos */
        min-width: 44px;
      }
      
      input, select, textarea {
        min-height: 44px;
      }
      
      th, td {
        padding: 15px 10px;
      }
      
      /* Eliminar efectos hover en m√≥vil */
      .btn:hover, .backup-btn:hover, .filter-btn:hover {
        transform: none !important;
      }
      
      /* Mejorar espaciado entre elementos t√°ctiles */
      .toolbar-left, .toolbar-right {
        gap: 15px;
      }
      
      .alert-actions {
        gap: 12px;
      }
    }

    /* Dark mode nativo del sistema */
    @media (prefers-color-scheme: dark) {
      /* Ajustes adicionales para dark mode */
      body {
        background: var(--bg);
      }
    }

    /* Mejoras de rendimiento en m√≥vil */
    @media (max-width: 768px) {
      /* Suavizar animaciones en m√≥vil */
      * {
        transition-duration: 0.2s !important;
      }
      
      /* Optimizar rendering */
      .table-scroll {
        -webkit-overflow-scrolling: touch; /* Scroll suave en iOS */
      }
      
      /* Evitar problemas de overflow */
      body, html {
        overflow-x: hidden;
        position: relative;
      }
    }

    /* Clase para mostrar cards en m√≥vil (ser√° activada por JS) */
    .mobile-cards-container {
      display: none;
      gap: 15px;
    }
    
    .mobile-card {
      background: var(--card-bg);
      border: 1px solid var(--card-border);
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 15px;
    }
    
    .mobile-card-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 15px;
    }
    
    .mobile-card-title {
      font-size: 16px;
      font-weight: 600;
      margin: 0;
    }
    
    .mobile-card-body {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
      font-size: 14px;
    }
    
    .mobile-card-field {
      display: flex;
      flex-direction: column;
    }
    
    .mobile-card-label {
      color: var(--muted);
      font-size: 12px;
      margin-bottom: 4px;
    }
    
    .mobile-card-value {
      font-weight: 500;
    }
    
    .mobile-card-actions {
      display: flex;
      gap: 10px;
      margin-top: 15px;
      flex-wrap: wrap;
    }

    /* Indicador de scroll para tablas en m√≥vil */
    .scroll-hint {
      display: none;
      text-align: center;
      padding: 10px;
      color: var(--muted);
      font-size: 12px;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 8px;
      margin-bottom: 10px;
    }
    
    @media (max-width: 768px) {
      .scroll-hint {
        display: block;
        animation: pulse 2s infinite;
      }
    }

    /* Animaci√≥n para el indicador de scroll */
    @keyframes pulse {
      0%, 100% { opacity: 0.6; }
      50% { opacity: 1; }
    }

    /* Estilos responsivos existentes (se mantienen) */
    :root {
      --primary: #2563eb;
      --primary-dark: #1d4ed8;
      --primary-soft: #dbeafe;
      --bg: #020617;
      --card-bg: #0f172a;
      --card-border: #1e293b;
      --accent: #22c55e;
      --danger: #ef4444;
      --warning: #f59e0b;
      --text: #e5e7eb;
      --muted: #9ca3af;
      --radius: 12px;
      --shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Poppins', sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
      -webkit-text-size-adjust: 100%; /* Evitar zoom de texto en iOS */
    }

    /* ========== LOGIN SCREEN ========== */
    .login-screen {
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      padding: 20px;
      background: var(--bg);
      background-image: 
        radial-gradient(circle at 10% 20%, rgba(37, 99, 235, 0.05) 0%, transparent 20%),
        radial-gradient(circle at 90% 80%, rgba(34, 197, 94, 0.05) 0%, transparent 20%);
    }

    .login-card {
      background: var(--card-bg);
      border: 1px solid var(--card-border);
      border-radius: var(--radius);
      padding: 40px;
      width: 100%;
      max-width: 420px;
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
    }

    .hotel-branding {
      text-align: center;
      margin-bottom: 32px;
    }

    .hotel-logo {
      font-size: 42px;
      margin-bottom: 12px;
      display: inline-block;
      padding: 15px;
      background: linear-gradient(135deg, var(--primary), #3b82f6);
      border-radius: 50%;
      color: white;
    }

    .hotel-name {
      font-size: 24px;
      font-weight: 700;
      background: linear-gradient(to right, var(--primary), var(--accent));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 8px;
    }

    .hotel-subtitle {
      color: var(--muted);
      font-size: 14px;
      font-weight: 400;
      letter-spacing: 0.5px;
    }

    .system-name {
      text-align: center;
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 32px;
      padding-bottom: 20px;
      border-bottom: 1px solid var(--card-border);
    }

    .form-group {
      margin-bottom: 24px;
    }

    .form-label {
      display: block;
      margin-bottom: 8px;
      font-weight: 500;
      color: var(--text);
      font-size: 14px;
    }

    .form-input {
      width: 100%;
      padding: 14px 16px;
      background: rgba(30, 41, 59, 0.5);
      border: 1px solid var(--card-border);
      border-radius: 8px;
      color: var(--text);
      font-family: 'Poppins', sans-serif;
      font-size: 15px;
      transition: all 0.3s ease;
    }

    .form-input:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.2);
    }

    .password-container {
      position: relative;
    }

    .toggle-password {
      position: absolute;
      right: 15px;
      top: 50%;
      transform: translateY(-50%);
      background: none;
      border: none;
      color: var(--muted);
      cursor: pointer;
      font-size: 18px;
    }

    .login-btn {
      width: 100%;
      padding: 15px;
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      color: white;
      border: none;
      border-radius: 8px;
      font-family: 'Poppins', sans-serif;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      margin-top: 10px;
    }

    .login-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(37, 99, 235, 0.4);
    }

    .login-btn:active {
      transform: translateY(0);
    }

    .error-message {
      background: rgba(239, 68, 68, 0.1);
      border: 1px solid var(--danger);
      color: var(--danger);
      padding: 12px;
      border-radius: 8px;
      margin-bottom: 20px;
      font-size: 14px;
      display: none;
    }

    .credentials-hint {
      background: rgba(245, 158, 11, 0.1);
      border: 1px solid var(--warning);
      color: var(--warning);
      padding: 12px;
      border-radius: 8px;
      margin-top: 24px;
      font-size: 13px;
      text-align: center;
    }

    .login-footer {
      text-align: center;
      margin-top: 32px;
      color: var(--muted);
      font-size: 13px;
    }

    .login-footer a {
      color: var(--primary);
      text-decoration: none;
    }

    @media (max-width: 480px) {
      .login-card {
        padding: 30px 24px;
      }
      
      .hotel-name {
        font-size: 20px;
      }
    }

    /* Animaci√≥n de carga para login */
    .loading {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 3px solid rgba(255,255,255,.3);
      border-radius: 50%;
      border-top-color: white;
      animation: spin 1s ease-in-out infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* ========== MAIN APP ========== */
    .app-container {
      display: none;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 1rem 1rem 1.5rem;
    }

    /* Encabezado simple */
    .app-header {
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      gap: 0.75rem;
      margin-bottom: 1.25rem;
      flex-wrap: wrap;
    }

    .user-info {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 8px 16px;
      background: rgba(30, 41, 59, 0.5);
      border-radius: 10px;
      border: 1px solid var(--card-border);
    }

    .user-avatar {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background: linear-gradient(135deg, #2563eb, #22c55e);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
    }

    .logout-btn {
      background: rgba(239, 68, 68, 0.1);
      border: 1px solid var(--danger);
      color: #fecaca;
      padding: 6px 12px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 13px;
    }

    .logout-btn:hover {
      background: rgba(239, 68, 68, 0.2);
    }

    .app-title {
      font-size: 1.4rem;
      font-weight: 700;
      letter-spacing: 0.03em;
      margin: 0;
      background: linear-gradient(90deg, #f97316, #22c55e, #3b82f6, #a855f7);
      background-size: 200% 200%;
      -webkit-background-clip: text;
      color: transparent;
      animation: gradientMove 6s ease infinite;
    }

    .app-subtitle {
      margin: 0.15rem 0 0;
      font-size: 0.85rem;
      color: var(--muted);
      max-width: 620px;
    }

    .app-tag {
      font-size: 0.75rem;
      padding: 0.25rem 0.7rem;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.5);
      background: rgba(15, 23, 42, 0.7);
      backdrop-filter: blur(10px);
      align-self: center;
      white-space: nowrap;
    }

    @keyframes gradientMove {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    /* Layout principal */
    .layout {
      display: grid;
      grid-template-columns: minmax(0, 1fr) minmax(0, 1.5fr);
      gap: 1.25rem;
      align-items: flex-start;
    }

    @media (max-width: 900px) {
      .layout {
        grid-template-columns: 1fr;
      }
    }

    .card {
      background: rgba(15, 23, 42, 0.92);
      border-radius: 1rem;
      padding: 1rem;
      border: 1px solid var(--card-border);
      box-shadow: 0 16px 40px rgba(15, 23, 42, 0.7);
    }

    @media (max-width: 600px) {
      .card {
        padding: 0.85rem;
      }
    }

    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      margin-bottom: 0.85rem;
      gap: 0.75rem;
      flex-wrap: wrap;
    }

    .card-title {
      font-size: 1rem;
      font-weight: 600;
      margin: 0;
    }

    .card-subtitle {
      font-size: 0.78rem;
      color: var(--muted);
      margin: 0.15rem 0 0;
    }

    .pill {
      font-size: 0.75rem;
      padding: 0.1rem 0.55rem;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.4);
      color: var(--muted);
      white-space: nowrap;
    }

    /* Formulario */
    form {
      display: grid;
      grid-template-columns: 1fr;
      gap: 0.7rem;
    }

    .form-row {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 0.7rem;
    }

    @media (max-width: 700px) {
      .form-row {
        grid-template-columns: 1fr;
      }
    }

    label {
      display: block;
      font-size: 0.78rem;
      margin-bottom: 0.15rem;
      color: var(--muted);
    }

    input, select, textarea {
      width: 100%;
      padding: 0.4rem 0.55rem;
      border-radius: 0.6rem;
      border: 1px solid #1f2937;
      background: #020617;
      color: var(--text);
      font-size: 0.85rem;
      outline: none;
      transition: border 0.15s ease, box-shadow 0.15s ease, background 0.15s ease;
    }

    input:focus, select:focus, textarea:focus {
      border-color: var(--primary);
      box-shadow: 0 0 0 1px rgba(37, 99, 235, 0.6);
      background: #020617;
    }

    textarea {
      min-height: 60px;
      resize: vertical;
    }

    .btn-row {
      display: flex;
      gap: 0.5rem;
      justify-content: flex-end;
      margin-top: 0.1rem;
      flex-wrap: wrap;
    }

    .btn {
      border-radius: 999px;
      padding: 0.35rem 0.9rem;
      border: none;
      font-size: 0.83rem;
      font-weight: 500;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 0.3rem;
      white-space: nowrap;
    }

    .btn-primary {
      background: linear-gradient(135deg, #2563eb, #4f46e5);
      color: white;
    }

    .btn-secondary {
      background: rgba(15, 23, 42, 0.92);
      border: 1px solid #1f2937;
      color: var(--text);
    }

    .btn-danger {
      background: rgba(239, 68, 68, 0.12);
      border: 1px solid rgba(248, 113, 113, 0.6);
      color: #fecaca;
    }

    .btn-sm {
      padding: 0.2rem 0.6rem;
      font-size: 0.75rem;
    }

    .btn:disabled {
      opacity: 0.6;
      cursor: default;
    }

    /* Toolbar y filtros */
    .toolbar {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      align-items: center;
      margin-bottom: 0.7rem;
    }

    .toolbar-left {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      align-items: center;
      flex: 1;
    }

    .toolbar-right {
      display: flex;
      gap: 0.5rem;
      align-items: center;
    }

    .input-inline {
      max-width: 220px;
      flex: 1;
      min-width: 130px;
    }

    .select-inline {
      max-width: 160px;
      min-width: 120px;
    }

    @media (max-width: 600px) {
      .toolbar-left,
      .toolbar-right {
        width: 100%;
        justify-content: flex-start;
      }
    }

    /* Tabla */
    .table-scroll {
      max-height: 420px;
      overflow-y: auto;
      border-radius: 0.8rem;
      border: 1px solid #020617;
      background: #020617;
      overflow-x: auto;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.8rem;
      min-width: 720px;
    }

    thead {
      background: rgba(15, 23, 42, 0.98);
    }

    th, td {
      padding: 0.45rem 0.4rem;
      border-bottom: 1px solid #111827;
      text-align: left;
    }

    th {
      font-weight: 500;
      color: var(--muted);
      font-size: 0.75rem;
      white-space: nowrap;
    }

    tbody tr:hover {
      background: rgba(15, 23, 42, 0.9);
    }

    .status-chip {
      font-size: 0.7rem;
      padding: 0.08rem 0.5rem;
      border-radius: 999px;
      border: 1px solid transparent;
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
    }

    .status-optimo {
      background: rgba(22, 163, 74, 0.15);
      border-color: rgba(34, 197, 94, 0.6);
      color: #bbf7d0;
    }

    .status-regular {
      background: rgba(234, 179, 8, 0.12);
      border-color: rgba(250, 204, 21, 0.6);
      color: #fef3c7;
    }

    .status-critico {
      background: rgba(239, 68, 68, 0.12);
      border-color: rgba(248, 113, 113, 0.6);
      color: #fecaca;
    }

    .empty-state {
      text-align: center;
      padding: 1.1rem;
      font-size: 0.85rem;
      color: var(--muted);
    }

    .footer {
      margin-top: 0.9rem;
      font-size: 0.74rem;
      color: var(--muted);
      text-align: right;
    }

    @media (max-width: 600px) {
      .footer {
        text-align: left;
      }
    }

    /* Backup Panel */
    .backup-panel {
      background: rgba(30, 41, 59, 0.5);
      border: 1px solid var(--card-border);
      border-radius: 10px;
      padding: 15px;
      margin-top: 20px;
    }

    .backup-title {
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 10px;
      color: var(--text);
    }

    .backup-buttons {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    .backup-btn {
      padding: 8px 16px;
      border-radius: 6px;
      border: 1px solid var(--card-border);
      background: rgba(15, 23, 42, 0.8);
      color: var(--text);
      cursor: pointer;
      font-size: 13px;
      transition: all 0.3s ease;
    }

    .backup-btn:hover {
      background: rgba(30, 41, 59, 0.8);
    }

    .backup-btn.success {
      border-color: var(--accent);
      color: var(--accent);
    }

    .backup-btn.warning {
      border-color: var(--warning);
      color: var(--warning);
    }

    /* Loader para app */
    .loader {
      border: 3px solid rgba(255, 255, 255, 0.1);
      border-radius: 50%;
      border-top: 3px solid var(--primary);
      width: 24px;
      height: 24px;
      animation: spin 1s linear infinite;
      display: inline-block;
    }

    /* Toast Notifications */
    .toast {
      position: fixed;
      bottom: 20px;
      right: 20px;
      padding: 12px 20px;
      border-radius: 8px;
      color: white;
      font-size: 14px;
      z-index: 1000;
      animation: slideIn 0.3s ease;
      max-width: 300px;
    }

    .toast.success {
      background: var(--accent);
    }

    .toast.error {
      background: var(--danger);
    }

    .toast.warning {
      background: var(--warning);
    }

    @keyframes slideIn {
      from {
        transform: translateX(100%);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }

    /* ========== NUEVO: SISTEMA DE ALERTAS ========== */
    .alerts-panel {
      background: rgba(30, 41, 59, 0.5);
      border: 1px solid var(--card-border);
      border-radius: 10px;
      padding: 15px;
      margin-top: 20px;
    }

    .alerts-title {
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 10px;
      color: var(--text);
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .alerts-title .badge {
      background: var(--danger);
      color: white;
      font-size: 11px;
      padding: 2px 8px;
      border-radius: 12px;
      font-weight: 600;
    }

    .alert-item {
      background: rgba(239, 68, 68, 0.1);
      border: 1px solid rgba(239, 68, 68, 0.3);
      border-radius: 8px;
      padding: 12px;
      margin-bottom: 10px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      transition: all 0.3s ease;
    }

    .alert-item:hover {
      background: rgba(239, 68, 68, 0.15);
    }

    .alert-info {
      flex: 1;
    }

    .alert-equipo {
      font-weight: 600;
      font-size: 13px;
      color: #fecaca;
      margin-bottom: 4px;
    }

    .alert-details {
      font-size: 11px;
      color: #fca5a5;
      display: flex;
      gap: 12px;
    }

    .alert-details span {
      display: flex;
      align-items: center;
      gap: 4px;
    }

    .alert-actions {
      display: flex;
      gap: 8px;
    }

    .alert-btn {
      padding: 4px 10px;
      border-radius: 6px;
      border: none;
      font-size: 11px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .alert-btn.resolve {
      background: rgba(34, 197, 94, 0.2);
      color: #bbf7d0;
      border: 1px solid rgba(34, 197, 94, 0.5);
    }

    .alert-btn.resolve:hover {
      background: rgba(34, 197, 94, 0.3);
    }

    .alert-btn.view {
      background: rgba(59, 130, 246, 0.2);
      color: #93c5fd;
      border: 1px solid rgba(59, 130, 246, 0.5);
    }

    .alert-btn.view:hover {
      background: rgba(59, 130, 246, 0.3);
    }

    .no-alerts {
      text-align: center;
      padding: 20px;
      color: var(--muted);
      font-size: 13px;
    }

    .alerts-filter {
      display: flex;
      gap: 10px;
      margin-bottom: 15px;
      flex-wrap: wrap;
    }

    .filter-btn {
      padding: 6px 12px;
      border-radius: 6px;
      border: 1px solid var(--card-border);
      background: rgba(15, 23, 42, 0.8);
      color: var(--text);
      cursor: pointer;
      font-size: 12px;
      transition: all 0.3s ease;
    }

    .filter-btn.active {
      background: rgba(37, 99, 235, 0.2);
      border-color: var(--primary);
      color: #93c5fd;
    }

    .filter-btn:hover:not(.active) {
      background: rgba(30, 41, 59, 0.8);
    }

    /* Modal para programar mantenimiento */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.7);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 2000;
      padding: 20px;
    }

    .modal {
      background: var(--card-bg);
      border: 1px solid var(--card-border);
      border-radius: var(--radius);
      padding: 25px;
      width: 100%;
      max-width: 500px;
      box-shadow: var(--shadow);
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .modal-title {
      font-size: 18px;
      font-weight: 600;
      color: var(--text);
    }

    .modal-close {
      background: none;
      border: none;
      color: var(--muted);
      cursor: pointer;
      font-size: 20px;
      padding: 5px;
    }

    .modal-close:hover {
      color: var(--text);
    }

    .modal-body {
      margin-bottom: 20px;
    }

    .modal-footer {
      display: flex;
      justify-content: flex-end;
      gap: 10px;
    }

    /* Indicador de alertas en el header */
    .alert-indicator {
      position: relative;
      margin-right: 10px;
    }

    .alert-bell {
      font-size: 18px;
      cursor: pointer;
      padding: 5px;
    }

    .alert-count {
      position: absolute;
      top: -5px;
      right: -5px;
      background: var(--danger);
      color: white;
      font-size: 10px;
      font-weight: bold;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* Historial de mantenimiento */
    .maintenance-history {
      margin-top: 15px;
      padding-top: 15px;
      border-top: 1px solid var(--card-border);
    }

    .history-title {
      font-size: 12px;
      font-weight: 600;
      color: var(--muted);
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .history-item {
      background: rgba(30, 41, 59, 0.3);
      border-radius: 6px;
      padding: 8px 10px;
      margin-bottom: 8px;
      font-size: 11px;
    }

    .history-date {
      color: var(--accent);
      font-weight: 500;
    }

    .history-desc {
      color: var(--muted);
      margin-top: 2px;
    }

  </style>
</head>
<body>
  <!-- ========== PANTALLA DE LOGIN ========== -->
  <div class="login-screen" id="loginScreen">
    <div class="login-card">
      <div class="hotel-branding">
        <div class="hotel-logo">üè®</div>
        <h1 class="hotel-name">Pacifica Resort Ixtapa</h1>
        <p class="hotel-subtitle">Departamento de Sistemas</p>
      </div>
      
      <div class="system-name">Sistema de Inventario de Activos TI</div>
      
      <div id="errorMessage" class="error-message">
        <!-- Mensajes de error aparecer√°n aqu√≠ -->
      </div>
      
      <form id="loginForm">
        <div class="form-group">
          <label class="form-label" for="username">Usuario Administrador</label>
          <input 
            type="text" 
            id="username" 
            class="form-input" 
            placeholder="Ingresa tu nombre de usuario"
            required
            autofocus
          >
        </div>
        
        <div class="form-group">
          <label class="form-label" for="password">Contrase√±a</label>
          <div class="password-container">
            <input 
              type="password" 
              id="password" 
              class="form-input" 
              placeholder="Ingresa tu contrase√±a"
              required
            >
            <button type="button" class="toggle-password" id="togglePassword">
              üëÅÔ∏è
            </button>
          </div>
        </div>
        
        <button type="submit" class="login-btn" id="loginBtn">
          <span id="btnText">Acceder al Sistema</span>
          <span id="btnLoading" class="loading" style="display: none;"></span>
        </button>
      </form>
      
      <!-- Solo visible durante desarrollo -->
      <div class="credentials-hint" id="devHint">
        <strong>Credenciales para pruebas:</strong><br>
        Usuario: <code>admin@pacifica</code> | Contrase√±a: <code>Pacifica2026</code>
      </div>
      
      <div class="login-footer">
        <p>¬© 2026 Pacifica Resort Ixtapa ¬∑ Solo personal autorizado</p>
        <p>Problemas para acceder? Contacta a 
        <a 
          href="https://wa.me/527551008478" 
          target="_blank" 
          style="color: var(--primary); text-decoration: none; font-weight: 500;"
          title="Contactar por WhatsApp">Sistemas</a></p>
      </div>
    </div>
  </div>

  <!-- ========== APLICACI√ìN PRINCIPAL ========== -->
  <div class="app-container" id="appContainer">
    <div class="container">
      <!-- Encabezado con info de usuario -->
      <header class="app-header">
        <!-- Dentro del .user-info en el header -->
        <div class="connection-status" id="connectionStatus" style="display: none;">
          <div style="display: flex; align-items: center; gap: 5px; font-size: 11px; padding: 3px 8px; border-radius: 12px; background: rgba(245, 158, 11, 0.2); border: 1px solid rgba(245, 158, 11, 0.5); color: #fef3c7;">
          <span>üåê</span>
          <span>Offline</span>
          </div>
        </div>
        <div>
          <h1 class="app-title">Inventario de Equipo de C√≥mputo</h1>
          <p class="app-subtitle">
            Sistema web est√°tico para registrar, consultar y exportar el inventario de equipo de c√≥mputo de
            <strong>Pac√≠fica Resort Ixtapa</strong>.
          </p>
        </div>
        <div class="user-info">
          <div class="alert-indicator" id="alertIndicator">
            <div class="alert-bell" id="alertBell">üîî</div>
            <div class="alert-count" id="alertCount">0</div>
          </div>
          <div class="user-avatar">A</div>
          <div>
            <div style="font-size: 12px; font-weight: 500;">Administrador</div>
            <div style="font-size: 10px; color: var(--muted);">Sesi√≥n activa</div>
          </div>
          <button class="logout-btn" id="logoutBtn">Cerrar Sesi√≥n</button>
        </div>
      </header>

      <main class="layout">
        <!-- Columna izquierda: Formulario -->
        <section class="card">
          <div class="card-header">
            <div>
              <h2 class="card-title">Registrar / editar equipo</h2>
              <p class="card-subtitle">Captura la informaci√≥n t√©cnica y de ubicaci√≥n del equipo.</p>
            </div>
          </div>

          <form id="inventory-form">
            <input type="hidden" id="item-id" />

            <div class="form-row">
              <div>
                <label for="categoria">Categor√≠a</label>
                <select id="categoria" required>
                  <option value="">Selecciona una opci√≥n</option>
                  <option value="PC Escritorio">PC Escritorio</option>
                  <option value="Laptop">Laptop</option>
                  <option value="Impresora / Multifuncional">Impresora / Multifuncional</option>
                  <option value="Equipo de Red">Equipo de Red</option>
                  <option value="Tel√©fono IP">Tel√©fono IP</option>
                  <option value="Servidor">Servidor</option>
                  <option value="Punto de Venta / POS">Punto de Venta / POS</option>
                  <option value="Otro">Otro</option>
                </select>
              </div>
              <div>
                <label for="area">√Årea / departamento</label>
                <input id="area" type="text" placeholder="Recepci√≥n, Reservaciones, Administraci√≥n..." required />
              </div>
            </div>

            <div class="form-row">
              <div>
                <label for="marca">Marca</label>
                <input id="marca" type="text" placeholder="Dell, HP, Lenovo, Epson..." required />
              </div>
              <div>
                <label for="modelo">Modelo</label>
                <input id="modelo" type="text" placeholder="Ej: OptiPlex 7090" required />
              </div>
            </div>

            <div class="form-row">
              <div>
                <label for="serie">N√∫mero de serie</label>
                <input id="serie" type="text" placeholder="S/N del fabricante" />
              </div>
              <div>
                <label for="activo">No. de activo / etiqueta hotel</label>
                <input id="activo" type="text" placeholder="C√≥digo interno del hotel" />
              </div>
            </div>

            <div class="form-row">
              <div>
                <label for="ip">Direcci√≥n IP (si aplica)</label>
                <input id="ip" type="text" placeholder="192.168.x.x" />
              </div>
              <div>
                <label for="fecha">Fecha de alta / adquisici√≥n</label>
                <input id="fecha" type="date" />
              </div>
            </div>

            <div class="form-row">
              <div>
                <label for="estado">Estado del equipo</label>
                <select id="estado" required>
                  <option value="">Selecciona una opci√≥n</option>
                  <option value="√ìptimo">√ìptimo</option>
                  <option value="Regular">Regular</option>
                  <option value="Cr√≠tico">Cr√≠tico</option>
                </select>
              </div>
              <div>
                <label for="usuario">Usuario / responsable</label>
                <input id="usuario" type="text" placeholder="Nombre del usuario o √°rea responsable" />
              </div>
            </div>

            <div>
              <label for="notas">Notas t√©cnicas / observaciones</label>
              <textarea id="notas" placeholder="Detalles de hardware, software, licencias, incidencias recientes, etc."></textarea>
            </div>

            <div class="btn-row">
              <button type="button" class="btn btn-secondary" id="btn-cancelar" disabled>Cancelar edici√≥n</button>
              <button type="submit" class="btn btn-primary" id="btn-guardar">
                Guardar equipo
              </button>
            </div>
          </form>

          <!-- Panel de Alertas de Mantenimiento -->
          <div class="alerts-panel" id="alertsPanel">
            <div class="alerts-title">
              ‚ö†Ô∏è Alertas de Mantenimiento
              <span class="badge" id="alertBadge">0</span>
            </div>
            
            <div class="alerts-filter" id="alertsFilter">
              <button class="filter-btn active" data-filter="all">Todos</button>
              <button class="filter-btn" data-filter="critical">Cr√≠tico</button>
              <button class="filter-btn" data-filter="regular">Regular</button>
              <button class="filter-btn" data-filter="resolved">Resueltos</button>
            </div>
            
            <div id="alertsList">
              <!-- Alertas din√°micas aparecer√°n aqu√≠ -->
              <div class="no-alerts" id="noAlerts">
                ‚úÖ No hay alertas activas. Todo el equipo est√° en buen estado.
              </div>
            </div>

            <!-- Historial de Mantenimiento -->
            <div class="maintenance-history" id="maintenanceHistory">
              <div class="history-title">üìã Historial Reciente</div>
              <div id="historyList">
                <!-- Historial din√°mico aparecer√° aqu√≠ -->
                <div class="no-alerts" style="font-size: 11px;">
                  No hay historial de mantenimiento registrado.
                </div>
              </div>
            </div>
          </div>

          <!-- Panel de Backup -->
          <div class="backup-panel">
            <div class="backup-title">üîí Copias de Seguridad</div>
            <div class="backup-buttons">
              <button class="backup-btn success" id="btnBackupNow">Crear Backup Ahora</button>
              <button class="backup-btn warning" id="btnRestoreBackup">Restaurar Backup</button>
              <button class="backup-btn" id="btnExportBackup">Exportar a Excel</button>
            </div>
          </div>
        </section>

        <!-- Columna derecha: Tabla -->
        <section class="card">
          <div class="card-header">
            <div>
              <h2 class="card-title">Inventario registrado</h2>
              <p class="card-subtitle">
                Consulta, filtra y exporta el inventario guardado en este navegador.
              </p>
            </div>
            <div class="pill">
              Total de equipos: <span id="total-equipos">0</span>
            </div>
          </div>

          <!-- Indicador de scroll para m√≥vil -->
          <div class="scroll-hint">‚Üê Desliza horizontalmente para ver m√°s informaci√≥n ‚Üí</div>

          <div class="toolbar">
            <div class="toolbar-left">
              <input
                id="busqueda"
                type="text"
                class="input-inline"
                placeholder="Buscar por marca, modelo, √°rea, usuario..."
              />
              <select id="filtro-categoria" class="select-inline">
                <option value="">Todas las categor√≠as</option>
                <option value="PC Escritorio">PC Escritorio</option>
                <option value="Laptop">Laptop</option>
                <option value="Impresora / Multifuncional">Impresora / Multifuncional</option>
                <option value="Equipo de Red">Equipo de Red</option>
                <option value="Tel√©fono IP">Tel√©fono IP</option>
                <option value="Servidor">Servidor</option>
                <option value="Punto de Venta / POS">Punto de Venta / POS</option>
                <option value="Otro">Otro</option>
              </select>
              <select id="filtro-estado" class="select-inline">
                <option value="">Todos los estados</option>
                <option value="√ìptimo">√ìptimo</option>
                <option value="Regular">Regular</option>
                <option value="Cr√≠tico">Cr√≠tico</option>
              </select>
            </div>
            <div class="toolbar-right">
              <button id="btn-exportar" class="btn btn-secondary btn-sm">
                Exportar CSV
              </button>
              <button id="btn-semilla" class="btn btn-secondary btn-sm">
                Cargar ejemplo
              </button>
              <button id="btn-schedule-maintenance" class="btn btn-sm" style="background: rgba(245, 158, 11, 0.12); border: 1px solid rgba(245, 158, 11, 0.6); color: #fef3c7;">
                Programar Mantenimiento
              </button>
            </div>
          </div>

          <div class="table-scroll">
            <table>
              <thead>
                <tr>
                  <th>Categor√≠a</th>
                  <th>√Årea</th>
                  <th>Marca / modelo</th>
                  <th>Activo</th>
                  <th>IP</th>
                  <th>Estado</th>
                  <th>Usuario</th>
                  <th>Acciones</th>
                </tr>
              </thead>
              <tbody id="tabla-cuerpo">
                <!-- Filas din√°micas -->
              </tbody>
            </table>
            <div id="empty-state" class="empty-state" style="display: none;">
              No hay equipos registrados todav√≠a. Usa el formulario de la izquierda para agregar el primero.
            </div>
          </div>

          <!-- Contenedor para cards m√≥viles (opcional) -->
          <div class="mobile-cards-container" id="mobileCardsContainer"></div>

          <div class="footer">
            Inventario de Sistemas ¬∑ Pac√≠fica Resort Ixtapa
          </div>
        </section>
      </main>
    </div>
  </div>

  <!-- Modal para programar mantenimiento -->
  <div class="modal-overlay" id="maintenanceModal">
    <div class="modal">
      <div class="modal-header">
        <h3 class="modal-title">üõ†Ô∏è Programar Mantenimiento</h3>
        <button class="modal-close" id="closeModal">&times;</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label class="form-label" for="maintenanceEquipment">Equipo</label>
          <select id="maintenanceEquipment" class="form-input">
            <option value="">Seleccionar equipo</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label" for="maintenanceDate">Fecha programada</label>
          <input type="date" id="maintenanceDate" class="form-input" required>
        </div>
        <div class="form-group">
          <label class="form-label" for="maintenanceType">Tipo de mantenimiento</label>
          <select id="maintenanceType" class="form-input" required>
            <option value="">Seleccionar tipo</option>
            <option value="Preventivo">Preventivo</option>
            <option value="Correctivo">Correctivo</option>
            <option value="Actualizaci√≥n">Actualizaci√≥n de software</option>
            <option value="Limpieza">Limpieza general</option>
            <option value="Reemplazo">Reemplazo de componentes</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label" for="maintenanceDesc">Descripci√≥n / Observaciones</label>
          <textarea id="maintenanceDesc" class="form-input" rows="3" placeholder="Describa el trabajo a realizar, partes necesarias, etc."></textarea>
        </div>
        <div class="form-group">
          <label class="form-label" for="maintenancePriority">Prioridad</label>
          <select id="maintenancePriority" class="form-input" required>
            <option value="Baja">Baja</option>
            <option value="Media">Media</option>
            <option value="Alta">Alta</option>
            <option value="Urgente">Urgente</option>
          </select>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" id="cancelMaintenance">Cancelar</button>
        <button class="btn btn-primary" id="saveMaintenance">Programar</button>
      </div>
    </div>
  </div>

  <script>
    // ============================================ 
    // FUNCIONES RESPONSIVAS NUEVAS
    // ============================================
    
    // Detectar si estamos en m√≥vil
    function isMobileDevice() {
      return window.innerWidth <= 768;
    }
    
    // Funci√≥n para adaptar tabla a cards en m√≥vil
    function adaptTableForMobile() {
      if (isMobileDevice() && window.innerWidth <= 480) {
        // Ocultar tabla, mostrar cards
        document.querySelector('table').style.display = 'none';
        const mobileContainer = document.getElementById('mobileCardsContainer');
        mobileContainer.style.display = 'block';
        mobileContainer.innerHTML = '';
        
        const filtrados = getFilteredInventory();
        
        if (filtrados.length === 0) {
          document.getElementById('empty-state').style.display = 'block';
          return;
        }
        
        filtrados.forEach(item => {
          const card = document.createElement('div');
          card.className = 'mobile-card';
          
          card.innerHTML = `
            <div class="mobile-card-header">
              <h3 class="mobile-card-title">${item.marca} ${item.modelo}</h3>
              <span class="${estadoClass(item.estado)}">${item.estado}</span>
            </div>
            <div class="mobile-card-body">
              <div class="mobile-card-field">
                <span class="mobile-card-label">Categor√≠a</span>
                <span class="mobile-card-value">${item.categoria}</span>
              </div>
              <div class="mobile-card-field">
                <span class="mobile-card-label">√Årea</span>
                <span class="mobile-card-value">${item.area}</span>
              </div>
              <div class="mobile-card-field">
                <span class="mobile-card-label">Activo</span>
                <span class="mobile-card-value">${item.activo || 'N/A'}</span>
              </div>
              <div class="mobile-card-field">
                <span class="mobile-card-label">IP</span>
                <span class="mobile-card-value">${item.ip || 'N/A'}</span>
              </div>
              <div class="mobile-card-field">
                <span class="mobile-card-label">Usuario</span>
                <span class="mobile-card-value">${item.usuario || 'N/A'}</span>
              </div>
            </div>
            <div class="mobile-card-actions">
              <button class="btn btn-secondary btn-sm" data-accion="editar" data-id="${item.id}">Editar</button>
              <button class="btn btn-danger btn-sm" data-accion="eliminar" data-id="${item.id}">Eliminar</button>
              ${item.estado === 'Cr√≠tico' || item.estado === 'Regular' ? 
                `<button class="btn btn-sm" style="background: rgba(245, 158, 11, 0.12); border: 1px solid rgba(245, 158, 11, 0.6); color: #fef3c7;" data-accion="alertar" data-id="${item.id}">‚ö†Ô∏è Alertar</button>` : 
                ''}
            </div>
          `;
          
          mobileContainer.appendChild(card);
        });
        
        // Agregar eventos a los botones de las cards
        mobileContainer.addEventListener('click', handleTableClick);
        
      } else {
        // Mostrar tabla, ocultar cards
        document.querySelector('table').style.display = '';
        document.getElementById('mobileCardsContainer').style.display = 'none';
      }
    }
    
    // Funci√≥n auxiliar para obtener inventario filtrado
    function getFilteredInventory() {
      const texto = busqueda.value.toLowerCase().trim();
      const cat = filtroCategoria.value;
      const est = filtroEstado.value;

      return inventario.filter((item) => {
        const matchTexto =
          !texto ||
          (item.categoria || "").toLowerCase().includes(texto) ||
          (item.area || "").toLowerCase().includes(texto) ||
          (item.marca || "").toLowerCase().includes(texto) ||
          (item.modelo || "").toLowerCase().includes(texto) ||
          (item.usuario || "").toLowerCase().includes(texto);

        const matchCategoria = !cat || item.categoria === cat;
        const matchEstado = !est || item.estado === est;

        return matchTexto && matchCategoria && matchEstado;
      });
    }
    
    // Ajustar tama√±os de fuentes y elementos en m√≥vil
    function adjustForMobile() {
      if (isMobileDevice()) {
        // Ajustar tama√±o m√≠nimo para botones t√°ctiles
        document.querySelectorAll('.btn, .backup-btn, .alert-btn, .filter-btn').forEach(btn => {
          if (btn.offsetHeight < 44) {
            btn.style.minHeight = '44px';
          }
          if (btn.offsetWidth < 44) {
            btn.style.minWidth = '44px';
          }
        });
        
        // Ajustar inputs para iOS
        document.querySelectorAll('input, select, textarea').forEach(input => {
          if (input.offsetHeight < 44) {
            input.style.minHeight = '44px';
          }
        });
      }
    }
    
    // Detectar cambios de orientaci√≥n
    function handleOrientationChange() {
      setTimeout(() => {
        adjustForMobile();
        adaptTableForMobile();
      }, 100);
    }
    
    // Detectar cambios de tama√±o de pantalla
    let resizeTimeout;
    function handleResize() {
      clearTimeout(resizeTimeout);
      resizeTimeout = setTimeout(() => {
        adjustForMobile();
        adaptTableForMobile();
      }, 250);
    }
    
    // Configurar eventos responsivos
    function initResponsiveFeatures() {
      // Evento de resize
      window.addEventListener('resize', handleResize);
      
      // Evento de orientaci√≥n
      window.addEventListener('orientationchange', handleOrientationChange);
      
      // Inicializar al cargar
      setTimeout(() => {
        adjustForMobile();
        adaptTableForMobile();
      }, 500);
      
      // Modificar renderTabla para ser responsivo
      const originalRenderTabla = window.renderTabla;
      window.renderTabla = function() {
        originalRenderTabla();
        adaptTableForMobile();
      };
    }

    // ============================================ 
    // CONFIGURACI√ìN Y CONSTANTES ORIGINALES
    // ============================================
    const CONFIG = {
      // Credenciales de administrador
      ADMIN_USER: 'admin@pacifica',
      ADMIN_PASS: 'Pacifica2026',
      
      // Claves de almacenamiento
      STORAGE_KEYS: {
        INVENTORY: 'pacifica_inventory_data_v2',
        BACKUPS: 'pacifica_inventory_backups',
        SESSION: 'pacifica_inventory_session',
        ALERTS: 'pacifica_inventory_alerts',
        MAINTENANCE: 'pacifica_inventory_maintenance'
      },
      
      // Configuraci√≥n de sesi√≥n
      SESSION_TIMEOUT: 60, // minutos
      
      // Configuraci√≥n de backup
      AUTO_BACKUP_INTERVAL: 24 * 60 * 60 * 1000, // 24 horas en milisegundos
      MAX_BACKUPS: 10,
      
      // Configuraci√≥n de alertas
      CHECK_ALERTS_INTERVAL: 60 * 60 * 1000, // 1 hora en milisegundos
      AUTO_ALERT_DAYS: 30 // Alertar despu√©s de 30 d√≠as en estado cr√≠tico/regular
    };

    // ============================================
    // VARIABLES GLOBALES
    // ============================================
    let inventario = [];
    let autoBackupInterval;
    let checkAlertsInterval;
    let alerts = [];
    let maintenanceHistory = [];

    // ============================================
    // ELEMENTOS DEL DOM - LOGIN
    // ============================================
    const loginScreen = document.getElementById('loginScreen');
    const appContainer = document.getElementById('appContainer');
    const loginForm = document.getElementById('loginForm');
    const usernameInput = document.getElementById('username');
    const passwordInput = document.getElementById('password');
    const togglePasswordBtn = document.getElementById('togglePassword');
    const loginBtn = document.getElementById('loginBtn');
    const btnText = document.getElementById('btnText');
    const btnLoading = document.getElementById('btnLoading');
    const errorMessage = document.getElementById('errorMessage');
    const devHint = document.getElementById('devHint');
    const logoutBtn = document.getElementById('logoutBtn');

    // ============================================
    // ELEMENTOS DEL DOM - INVENTARIO
    // ============================================
    // Formulario principal
    const form = document.getElementById("inventory-form");
    const inputId = document.getElementById("item-id");
    const inputCategoria = document.getElementById("categoria");
    const inputArea = document.getElementById("area");
    const inputMarca = document.getElementById("marca");
    const inputModelo = document.getElementById("modelo");
    const inputSerie = document.getElementById("serie");
    const inputActivo = document.getElementById("activo");
    const inputIp = document.getElementById("ip");
    const inputFecha = document.getElementById("fecha");
    const inputEstado = document.getElementById("estado");
    const inputUsuario = document.getElementById("usuario");
    const inputNotas = document.getElementById("notas");

    // Tabla y controles
    const tablaCuerpo = document.getElementById("tabla-cuerpo");
    const emptyState = document.getElementById("empty-state");
    const totalEquiposLabel = document.getElementById("total-equipos");
    const busqueda = document.getElementById("busqueda");
    const filtroCategoria = document.getElementById("filtro-categoria");
    const filtroEstado = document.getElementById("filtro-estado");
    const btnExportar = document.getElementById("btn-exportar");
    const btnSemilla = document.getElementById("btn-semilla");
    const btnCancelar = document.getElementById("btn-cancelar");
    const btnGuardar = document.getElementById("btn-guardar");
    const btnScheduleMaintenance = document.getElementById("btn-schedule-maintenance");

    // Botones de backup
    const btnBackupNow = document.getElementById('btnBackupNow');
    const btnRestoreBackup = document.getElementById('btnRestoreBackup');
    const btnExportBackup = document.getElementById('btnExportBackup');

    // ============================================
    // ELEMENTOS DEL DOM - SISTEMA DE ALERTAS
    // ============================================
    const alertIndicator = document.getElementById('alertIndicator');
    const alertBell = document.getElementById('alertBell');
    const alertCount = document.getElementById('alertCount');
    const alertsPanel = document.getElementById('alertsPanel');
    const alertBadge = document.getElementById('alertBadge');
    const alertsFilter = document.getElementById('alertsFilter');
    const alertsList = document.getElementById('alertsList');
    const noAlerts = document.getElementById('noAlerts');
    const maintenanceHistorySection = document.getElementById('maintenanceHistory');
    const historyList = document.getElementById('historyList');

    // Modal de mantenimiento
    const maintenanceModal = document.getElementById('maintenanceModal');
    const closeModal = document.getElementById('closeModal');
    const cancelMaintenance = document.getElementById('cancelMaintenance');
    const saveMaintenance = document.getElementById('saveMaintenance');
    const maintenanceEquipment = document.getElementById('maintenanceEquipment');
    const maintenanceDate = document.getElementById('maintenanceDate');
    const maintenanceType = document.getElementById('maintenanceType');
    const maintenanceDesc = document.getElementById('maintenanceDesc');
    const maintenancePriority = document.getElementById('maintenancePriority');

    // ============================================
    // FUNCIONES DE AUTENTICACI√ìN
    // ============================================
    function initAuth() {
      // Configurar evento de login
      loginForm.addEventListener('submit', handleLogin);
      
      // Configurar toggle de contrase√±a
      togglePasswordBtn.addEventListener('click', function() {
        const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
        passwordInput.setAttribute('type', type);
        this.textContent = type === 'password' ? 'üëÅÔ∏è' : 'üëÅÔ∏è‚Äçüó®Ô∏è';
      });
      
      // Configurar logout
      logoutBtn.addEventListener('click', handleLogout);
      
      // Ocultar hint de desarrollo en producci√≥n
      if (window.location.hostname !== 'localhost' && !window.location.hostname.includes('127.0.0.1')) {
        devHint.style.display = 'none';
      }
      
      // Verificar sesi√≥n existente
      checkExistingSession();
    }

    function validateCredentials(username, password) {
      return username === CONFIG.ADMIN_USER && password === CONFIG.ADMIN_PASS;
    }

    function createSession() {
      const sessionData = {
        user: CONFIG.ADMIN_USER,
        timestamp: new Date().getTime(),
        expires: new Date().getTime() + (CONFIG.SESSION_TIMEOUT * 60000),
        token: btoa(`${CONFIG.ADMIN_USER}:${Date.now()}`).replace(/=/g, '')
      };
      
      // Guardar en localStorage con encriptaci√≥n b√°sica
      const encryptedSession = btoa(JSON.stringify(sessionData));
      localStorage.setItem(CONFIG.STORAGE_KEYS.SESSION, encryptedSession);
      
      return sessionData.token;
    }

    function checkExistingSession() {
      try {
        const stored = localStorage.getItem(CONFIG.STORAGE_KEYS.SESSION);
        if (!stored) return false;
        
        const sessionData = JSON.parse(atob(stored));
        const now = new Date().getTime();
        
        if (now > sessionData.expires) {
          localStorage.removeItem(CONFIG.STORAGE_KEYS.SESSION);
          return false;
        }
        
        // Sesi√≥n v√°lida, mostrar la app
        showApp();
        return true;
      } catch (e) {
        localStorage.removeItem(CONFIG.STORAGE_KEYS.SESSION);
        return false;
      }
    }

    async function handleLogin(e) {
      e.preventDefault();
      
      const username = usernameInput.value.trim();
      const password = passwordInput.value;
      
      // Mostrar estado de carga
      btnText.style.display = 'none';
      btnLoading.style.display = 'inline-block';
      loginBtn.disabled = true;
      
      // Simular tiempo de procesamiento
      await new Promise(resolve => setTimeout(resolve, 800));
      
      if (validateCredentials(username, password)) {
        // Crear sesi√≥n
        createSession();
        
        // Mostrar √©xito
        loginBtn.style.background = 'linear-gradient(135deg, var(--accent), #16a34a)';
        btnText.textContent = '‚úì Acceso concedido';
        btnText.style.display = 'inline-block';
        btnLoading.style.display = 'none';
        
        // Mostrar la app despu√©s de breve pausa
        setTimeout(() => {
          showApp();
        }, 500);
        
      } else {
        // Mostrar error
        errorMessage.textContent = 'Credenciales incorrectas. Verifica tu usuario y contrase√±a.';
        errorMessage.style.display = 'block';
        
        // Restaurar bot√≥n
        btnText.style.display = 'inline-block';
        btnLoading.style.display = 'none';
        loginBtn.disabled = false;
        
        // Efecto de error
        usernameInput.style.borderColor = 'var(--danger)';
        passwordInput.style.borderColor = 'var(--danger)';
        
        setTimeout(() => {
          usernameInput.style.borderColor = '';
          passwordInput.style.borderColor = '';
        }, 2000);
      }
    }

    function handleLogout() {
      // Detener intervalos
      if (autoBackupInterval) {
        clearInterval(autoBackupInterval);
      }
      if (checkAlertsInterval) {
        clearInterval(checkAlertsInterval);
      }
      
      // Limpiar sesi√≥n
      localStorage.removeItem(CONFIG.STORAGE_KEYS.SESSION);
      
      // Mostrar mensaje
      showToast('Sesi√≥n cerrada correctamente', 'warning');
      
      // Volver al login
      setTimeout(() => {
        loginScreen.style.display = 'flex';
        appContainer.style.display = 'none';
        
        // Limpiar formulario de login
        usernameInput.value = '';
        passwordInput.value = '';
        passwordInput.setAttribute('type', 'password');
        togglePasswordBtn.textContent = 'üëÅÔ∏è';
        errorMessage.style.display = 'none';
        
        // Restaurar bot√≥n de login
        loginBtn.style.background = 'linear-gradient(135deg, var(--primary), var(--primary-dark))';
        btnText.textContent = 'Acceder al Sistema';
        loginBtn.disabled = false;
      }, 500);
    }

    function showApp() {
      loginScreen.style.display = 'none';
      appContainer.style.display = 'block';
      
      // Iniciar el sistema de inventario
      initInventorySystem();
      
      // Iniciar backup autom√°tico
      startAutoBackup();
      
      // Iniciar sistema de alertas
      startAlertSystem();
      
      // Iniciar caracter√≠sticas responsivas
      initResponsiveFeatures();
    }

    // ============================================
    // SISTEMA DE INVENTARIO
    // ============================================
    function initInventorySystem() {
      // Cargar inventario desde localStorage
      cargarInventario();
      
      // Cargar alertas y mantenimiento
      cargarAlertas();
      cargarHistorialMantenimiento();
      
      // Configurar eventos del formulario
      form.addEventListener("submit", handleFormSubmit);
      btnCancelar.addEventListener("click", () => modoEdicion(false));
      
      // Configurar eventos de la tabla
      tablaCuerpo.addEventListener("click", handleTableClick);
      
      // Configurar filtros
      [busqueda, filtroCategoria, filtroEstado].forEach((el) => {
        el.addEventListener("input", renderTabla);
        el.addEventListener("change", renderTabla);
      });
      
      // Configurar botones de exportaci√≥n
      btnExportar.addEventListener("click", exportToCSV);
      btnSemilla.addEventListener("click", loadSampleData);
      
      // Configurar botones de backup
      btnBackupNow.addEventListener('click', createManualBackup);
      btnRestoreBackup.addEventListener('click', restoreFromBackup);
      btnExportBackup.addEventListener('click', exportToExcel);
      
      // Configurar bot√≥n de programar mantenimiento
      btnScheduleMaintenance.addEventListener('click', () => {
        openMaintenanceModal();
      });
    }

    function cargarInventario() {
      try {
        const data = localStorage.getItem(CONFIG.STORAGE_KEYS.INVENTORY);
        inventario = data ? JSON.parse(data) : [];
        
        // Si no hay datos, intentar cargar del √∫ltimo backup
        if (inventario.length === 0) {
          const backups = getBackups();
          if (backups.length > 0) {
            const latestBackup = backups[0];
            if (confirm('No se encontraron datos actuales. ¬øDeseas restaurar del √∫ltimo backup?')) {
              inventario = latestBackup.data;
              guardarInventario();
              showToast('Datos restaurados del backup', 'success');
            }
          }
        }
      } catch (e) {
        console.error("Error al leer localStorage:", e);
        inventario = [];
      }
      renderTabla();
    }

    function guardarInventario() {
      try {
        localStorage.setItem(CONFIG.STORAGE_KEYS.INVENTORY, JSON.stringify(inventario));
      } catch (e) {
        console.error("Error al guardar en localStorage:", e);
        showToast('Error al guardar datos', 'error');
      }
    }

    function limpiarFormulario() {
      inputId.value = "";
      inputCategoria.value = "";
      inputArea.value = "";
      inputMarca.value = "";
      inputModelo.value = "";
      inputSerie.value = "";
      inputActivo.value = "";
      inputIp.value = "";
      inputFecha.value = "";
      inputEstado.value = "";
      inputUsuario.value = "";
      inputNotas.value = "";
    }

    function modoEdicion(activado) {
      if (activado) {
        btnCancelar.disabled = false;
        btnGuardar.textContent = "Actualizar equipo";
      } else {
        btnCancelar.disabled = true;
        btnGuardar.textContent = "Guardar equipo";
        limpiarFormulario();
      }
    }

    function estadoClass(estado) {
      if (estado === "√ìptimo") return "status-chip status-optimo";
      if (estado === "Regular") return "status-chip status-regular";
      if (estado === "Cr√≠tico") return "status-chip status-critico";
      return "status-chip";
    }

    function renderTabla() {
      const texto = busqueda.value.toLowerCase().trim();
      const cat = filtroCategoria.value;
      const est = filtroEstado.value;

      let filtrados = inventario.filter((item) => {
        const matchTexto =
          !texto ||
          (item.categoria || "").toLowerCase().includes(texto) ||
          (item.area || "").toLowerCase().includes(texto) ||
          (item.marca || "").toLowerCase().includes(texto) ||
          (item.modelo || "").toLowerCase().includes(texto) ||
          (item.usuario || "").toLowerCase().includes(texto);

        const matchCategoria = !cat || item.categoria === cat;
        const matchEstado = !est || item.estado === est;

        return matchTexto && matchCategoria && matchEstado;
      });

      tablaCuerpo.innerHTML = "";

      if (filtrados.length === 0) {
        emptyState.style.display = "block";
      } else {
        emptyState.style.display = "none";

        filtrados.forEach((item) => {
          const tr = document.createElement("tr");

          tr.innerHTML = `
            <td>${item.categoria || ""}</td>
            <td>${item.area || ""}</td>
            <td>
              <div><strong>${item.marca || ""}</strong></div>
              <div style="font-size: 0.75rem; color: #9ca3af;">${item.modelo || ""}</div>
            </td>
            <td>${item.activo || ""}</td>
            <td style="font-size: 0.75rem;">${item.ip || ""}</td>
            <td>
              <span class="${estadoClass(item.estado)}">${item.estado || ""}</span>
            </td>
            <td style="font-size: 0.75rem;">${item.usuario || ""}</td>
            <td>
              <div style="display:flex; gap:0.25rem; flex-wrap:wrap;">
                <button class="btn btn-secondary btn-sm" data-accion="editar" data-id="${item.id}">Editar</button>
                <button class="btn btn-danger btn-sm" data-accion="eliminar" data-id="${item.id}">Eliminar</button>
                ${item.estado === 'Cr√≠tico' || item.estado === 'Regular' ? 
                  `<button class="btn btn-sm" style="background: rgba(245, 158, 11, 0.12); border: 1px solid rgba(245, 158, 11, 0.6); color: #fef3c7;" data-accion="alertar" data-id="${item.id}">‚ö†Ô∏è Alertar</button>` : 
                  ''}
              </div>
            </td>
          `;
          tablaCuerpo.appendChild(tr);
        });
      }

      totalEquiposLabel.textContent = inventario.length;
    }

    function handleFormSubmit(e) {
      e.preventDefault();

      const payload = {
        id: inputId.value ? Number(inputId.value) : Date.now(),
        categoria: inputCategoria.value,
        area: inputArea.value.trim(),
        marca: inputMarca.value.trim(),
        modelo: inputModelo.value.trim(),
        serie: inputSerie.value.trim(),
        activo: inputActivo.value.trim(),
        ip: inputIp.value.trim(),
        fecha: inputFecha.value,
        estado: inputEstado.value,
        usuario: inputUsuario.value.trim(),
        notas: inputNotas.value.trim(),
        ultimoEstadoCambio: inputId.value ? null : new Date().toISOString()
      };

      if (!payload.categoria || !payload.area || !payload.marca || !payload.modelo || !payload.estado) {
        showToast('Por favor completa los campos requeridos', 'warning');
        return;
      }

      if (inputId.value) {
        const index = inventario.findIndex((i) => i.id === payload.id);
        if (index !== -1) {
          // Si el estado cambi√≥, actualizar la fecha
          if (inventario[index].estado !== payload.estado) {
            payload.ultimoEstadoCambio = new Date().toISOString();
          } else {
            payload.ultimoEstadoCambio = inventario[index].ultimoEstadoCambio;
          }
          inventario[index] = payload;
          showToast('Equipo actualizado correctamente', 'success');
          
          // Verificar si necesita alerta
          if (payload.estado === 'Cr√≠tico' || payload.estado === 'Regular') {
            checkAndCreateAlert(payload);
          }
        }
      } else {
        payload.ultimoEstadoCambio = new Date().toISOString();
        inventario.push(payload);
        showToast('Equipo agregado al inventario', 'success');
        
        // Verificar si necesita alerta
        if (payload.estado === 'Cr√≠tico' || payload.estado === 'Regular') {
          checkAndCreateAlert(payload);
        }
      }

      guardarInventario();
      renderTabla();
      modoEdicion(false);
      
      // Actualizar alertas
      checkAlerts();
      renderAlertas();
    }

    function handleTableClick(e) {
      const btn = e.target.closest("button");
      if (!btn) return;

      const accion = btn.getAttribute("data-accion");
      const id = Number(btn.getAttribute("data-id"));
      const item = inventario.find((i) => i.id === id);
      if (!item) return;

      if (accion === "editar") {
        inputId.value = item.id;
        inputCategoria.value = item.categoria || "";
        inputArea.value = item.area || "";
        inputMarca.value = item.marca || "";
        inputModelo.value = item.modelo || "";
        inputSerie.value = item.serie || "";
        inputActivo.value = item.activo || "";
        inputIp.value = item.ip || "";
        inputFecha.value = item.fecha || "";
        inputEstado.value = item.estado || "";
        inputUsuario.value = item.usuario || "";
        inputNotas.value = item.notas || "";
        modoEdicion(true);
        window.scrollTo({ top: 0, behavior: "smooth" });
      }

      if (accion === "eliminar") {
        if (confirm("¬øSeguro que deseas eliminar este equipo del inventario?")) {
          inventario = inventario.filter((i) => i.id !== id);
          guardarInventario();
          renderTabla();
          showToast('Equipo eliminado correctamente', 'success');
          
          // Eliminar alertas asociadas
          eliminarAlertasDeEquipo(id);
        }
      }
      
      if (accion === "alertar") {
        // Crear alerta manual para este equipo
        crearAlertaManual(item);
      }
    }
    // En el JavaScript, despu√©s de las funciones de toast
function updateConnectionStatus() {
  const statusEl = document.getElementById('connectionStatus');
  if (statusEl) {
    if (navigator.onLine) {
      statusEl.style.display = 'none';
    } else {
      statusEl.style.display = 'block';
    }
  }
}

// Monitorear conexi√≥n
window.addEventListener('online', updateConnectionStatus);
window.addEventListener('offline', updateConnectionStatus);

// Inicializar
updateConnectionStatus();

    // ============================================
    // SISTEMA DE ALERTAS PROGRAMADAS
    // ============================================
    function cargarAlertas() {
      try {
        const data = localStorage.getItem(CONFIG.STORAGE_KEYS.ALERTS);
        alerts = data ? JSON.parse(data) : [];
      } catch (e) {
        alerts = [];
      }
    }

    function guardarAlertas() {
      try {
        localStorage.setItem(CONFIG.STORAGE_KEYS.ALERTS, JSON.stringify(alerts));
      } catch (e) {
        console.error("Error al guardar alertas:", e);
      }
    }

    function cargarHistorialMantenimiento() {
      try {
        const data = localStorage.getItem(CONFIG.STORAGE_KEYS.MAINTENANCE);
        maintenanceHistory = data ? JSON.parse(data) : [];
      } catch (e) {
        maintenanceHistory = [];
      }
      renderHistorialMantenimiento();
    }

    function guardarHistorialMantenimiento() {
      try {
        localStorage.setItem(CONFIG.STORAGE_KEYS.MAINTENANCE, JSON.stringify(maintenanceHistory));
      } catch (e) {
        console.error("Error al guardar historial:", e);
      }
    }

    function checkAndCreateAlert(equipo) {
      // Verificar si ya existe una alerta para este equipo
      const alertaExistente = alerts.find(a => a.equipoId === equipo.id && a.estado === 'activa');
      
      if (!alertaExistente) {
        // Crear nueva alerta
        const nuevaAlerta = {
          id: Date.now(),
          equipoId: equipo.id,
          equipoNombre: `${equipo.marca} ${equipo.modelo} - ${equipo.area}`,
          tipo: equipo.estado === 'Cr√≠tico' ? 'critical' : 'regular',
          estado: 'activa',
          fechaCreacion: new Date().toISOString(),
          fechaEstado: equipo.ultimoEstadoCambio,
          prioridad: equipo.estado === 'Cr√≠tico' ? 'alta' : 'media',
          descripcion: equipo.estado === 'Cr√≠tico' 
            ? 'Equipo en estado cr√≠tico. Necesita atenci√≥n inmediata.' 
            : 'Equipo en estado regular. Requiere mantenimiento preventivo.'
        };
        
        alerts.unshift(nuevaAlerta);
        guardarAlertas();
        return true;
      }
      
      return false;
    }

    function crearAlertaManual(equipo) {
      const alertaExistente = alerts.find(a => a.equipoId === equipo.id && a.estado === 'activa');
      
      if (!alertaExistente) {
        const nuevaAlerta = {
          id: Date.now(),
          equipoId: equipo.id,
          equipoNombre: `${equipo.marca} ${equipo.modelo} - ${equipo.area}`,
          tipo: equipo.estado === 'Cr√≠tico' ? 'critical' : 'regular',
          estado: 'activa',
          fechaCreacion: new Date().toISOString(),
          fechaEstado: equipo.ultimoEstadoCambio,
          prioridad: 'alta',
          descripcion: 'Alerta creada manualmente. Necesita atenci√≥n.'
        };
        
        alerts.unshift(nuevaAlerta);
        guardarAlertas();
        renderAlertas();
        updateAlertCount();
        showToast('Alerta creada para este equipo', 'warning');
      } else {
        showToast('Ya existe una alerta activa para este equipo', 'info');
      }
    }

    function checkAlerts() {
      const ahora = new Date();
      const equiposConProblemas = inventario.filter(equipo => 
        equipo.estado === 'Cr√≠tico' || equipo.estado === 'Regular'
      );
      
      equiposConProblemas.forEach(equipo => {
        if (equipo.ultimoEstadoCambio) {
          const fechaEstado = new Date(equipo.ultimoEstadoCambio);
          const diasEnEstado = (ahora - fechaEstado) / (1000 * 60 * 60 * 24);
          
          if (diasEnEstado >= CONFIG.AUTO_ALERT_DAYS) {
            checkAndCreateAlert(equipo);
          }
        }
      });
      
      // Limpiar alertas resueltas (equipos que ya est√°n en estado √ìptimo)
      alerts = alerts.filter(alerta => {
        const equipo = inventario.find(e => e.id === alerta.equipoId);
        if (!equipo || equipo.estado === '√ìptimo') {
          return false; // Eliminar alerta si el equipo ya est√° √≥ptimo
        }
        return true;
      });
      
      guardarAlertas();
      renderAlertas();
      updateAlertCount();
    }

    function renderAlertas() {
      const filter = document.querySelector('.filter-btn.active')?.dataset.filter || 'all';
      
      let alertasFiltradas = alerts;
      
      if (filter === 'critical') {
        alertasFiltradas = alerts.filter(a => a.tipo === 'critical' && a.estado === 'activa');
      } else if (filter === 'regular') {
        alertasFiltradas = alerts.filter(a => a.tipo === 'regular' && a.estado === 'activa');
      } else if (filter === 'resolved') {
        alertasFiltradas = alerts.filter(a => a.estado === 'resuelta');
      } else {
        alertasFiltradas = alerts.filter(a => a.estado === 'activa');
      }
      
      alertsList.innerHTML = '';
      
      if (alertasFiltradas.length === 0) {
        noAlerts.style.display = 'block';
      } else {
        noAlerts.style.display = 'none';
        
        alertasFiltradas.forEach(alerta => {
          const equipo = inventario.find(e => e.id === alerta.equipoId);
          if (!equipo) return;
          
          const alertItem = document.createElement('div');
          alertItem.className = 'alert-item';
          
          const fecha = new Date(alerta.fechaCreacion);
          const fechaStr = fecha.toLocaleDateString();
          const dias = Math.floor((new Date() - fecha) / (1000 * 60 * 60 * 24));
          
          alertItem.innerHTML = `
            <div class="alert-info">
              <div class="alert-equipo">${alerta.equipoNombre}</div>
              <div class="alert-details">
                <span>${equipo.activo ? 'Activo: ' + equipo.activo : 'Sin activo'}</span>
                <span>${alerta.tipo === 'critical' ? '‚ö†Ô∏è Cr√≠tico' : '‚ö†Ô∏è Regular'}</span>
                <span>üìÖ ${fechaStr} (${dias} d√≠as)</span>
                <span>üìç ${equipo.area}</span>
              </div>
            </div>
            <div class="alert-actions">
              <button class="alert-btn view" data-id="${alerta.id}" data-action="view">
                Ver
              </button>
              ${alerta.estado === 'activa' ? `
                <button class="alert-btn resolve" data-id="${alerta.id}" data-action="resolve">
                  Resolver
                </button>
              ` : ''}
            </div>
          `;
          
          alertsList.appendChild(alertItem);
        });
      }
      
      // Actualizar badge
      const alertasActivas = alerts.filter(a => a.estado === 'activa').length;
      alertBadge.textContent = alertasActivas;
      
      // Configurar eventos de los botones de alerta
      document.querySelectorAll('.alert-btn').forEach(btn => {
        btn.addEventListener('click', function() {
          const alertId = Number(this.dataset.id);
          const action = this.dataset.action;
          
          if (action === 'view') {
            verEquipoDeAlerta(alertId);
          } else if (action === 'resolve') {
            resolverAlerta(alertId);
          }
        });
      });
    }

    function updateAlertCount() {
      const alertasActivas = alerts.filter(a => a.estado === 'activa').length;
      alertCount.textContent = alertasActivas;
      
      if (alertasActivas > 0) {
        alertCount.style.display = 'flex';
        alertBell.textContent = 'üîî';
        
        // Animar la campana si hay alertas cr√≠ticas
        const alertasCriticas = alerts.filter(a => a.tipo === 'critical' && a.estado === 'activa').length;
        if (alertasCriticas > 0) {
          alertBell.style.animation = 'pulse 2s infinite';
          alertBell.style.color = '#ef4444';
        } else {
          alertBell.style.animation = '';
          alertBell.style.color = '';
        }
      } else {
        alertCount.style.display = 'none';
        alertBell.textContent = 'üîï';
        alertBell.style.animation = '';
        alertBell.style.color = '';
      }
    }

    function verEquipoDeAlerta(alertId) {
      const alerta = alerts.find(a => a.id === alertId);
      if (!alerta) return;
      
      const equipo = inventario.find(e => e.id === alerta.equipoId);
      if (!equipo) return;
      
      // Editar el equipo
      inputId.value = equipo.id;
      inputCategoria.value = equipo.categoria || "";
      inputArea.value = equipo.area || "";
      inputMarca.value = equipo.marca || "";
      inputModelo.value = equipo.modelo || "";
      inputSerie.value = equipo.serie || "";
      inputActivo.value = equipo.activo || "";
      inputIp.value = equipo.ip || "";
      inputFecha.value = equipo.fecha || "";
      inputEstado.value = equipo.estado || "";
      inputUsuario.value = equipo.usuario || "";
      inputNotas.value = equipo.notas || "";
      modoEdicion(true);
      window.scrollTo({ top: 0, behavior: "smooth" });
    }

    function resolverAlerta(alertId) {
      const alerta = alerts.find(a => a.id === alertId);
      if (!alerta) return;
      
      const equipo = inventario.find(e => e.id === alerta.equipoId);
      if (!equipo) return;
      
      // Abrir modal de mantenimiento pre-llenado
      openMaintenanceModal(equipo, alerta);
    }

    function eliminarAlertasDeEquipo(equipoId) {
      alerts = alerts.filter(a => a.equipoId !== equipoId);
      guardarAlertas();
      renderAlertas();
      updateAlertCount();
    }

    function startAlertSystem() {
      // Verificar alertas inicialmente
      checkAlerts();
      updateAlertCount();
      
      // Configurar intervalo para verificar alertas
      checkAlertsInterval = setInterval(() => {
        checkAlerts();
      }, CONFIG.CHECK_ALERTS_INTERVAL);
      
      // Configurar eventos del filtro de alertas
      document.querySelectorAll('.filter-btn').forEach(btn => {
        btn.addEventListener('click', function() {
          document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
          this.classList.add('active');
          renderAlertas();
        });
      });
      
      // Configurar evento de la campana
      alertBell.addEventListener('click', () => {
        if (alerts.filter(a => a.estado === 'activa').length > 0) {
          // Desplazarse al panel de alertas
          alertsPanel.scrollIntoView({ behavior: 'smooth' });
        }
      });
    }

    // ============================================
    // SISTEMA DE MANTENIMIENTO PROGRAMADO
    // ============================================
    function openMaintenanceModal(equipo = null, alerta = null) {
      // Limpiar el select de equipos
      maintenanceEquipment.innerHTML = '<option value="">Seleccionar equipo</option>';
      
      // Llenar con equipos que necesitan mantenimiento (estado Cr√≠tico o Regular)
      const equiposNecesitados = inventario.filter(e => e.estado === 'Cr√≠tico' || e.estado === 'Regular');
      
      equiposNecesitados.forEach(e => {
        const option = document.createElement('option');
        option.value = e.id;
        option.textContent = `${e.marca} ${e.modelo} - ${e.area} (${e.estado})`;
        if (equipo && e.id === equipo.id) {
          option.selected = true;
        }
        maintenanceEquipment.appendChild(option);
      });
      
      // Establecer fecha m√≠nima (hoy)
      const hoy = new Date().toISOString().split('T')[0];
      maintenanceDate.min = hoy;
      maintenanceDate.value = hoy;
      
      // Si hay una alerta, pre-llenar informaci√≥n
      if (alerta) {
        maintenanceType.value = alerta.tipo === 'critical' ? 'Correctivo' : 'Preventivo';
        maintenancePriority.value = alerta.prioridad === 'alta' ? 'Urgente' : 'Media';
        maintenanceDesc.value = `Resolver alerta: ${alerta.descripcion}\n`;
      } else {
        maintenanceType.value = '';
        maintenancePriority.value = 'Media';
        maintenanceDesc.value = '';
      }
      
      // Mostrar modal
      maintenanceModal.style.display = 'flex';
    }

    function closeMaintenanceModal() {
      maintenanceModal.style.display = 'none';
    }

    function saveMaintenanceSchedule() {
      const equipoId = Number(maintenanceEquipment.value);
      const fecha = maintenanceDate.value;
      const tipo = maintenanceType.value;
      const descripcion = maintenanceDesc.value.trim();
      const prioridad = maintenancePriority.value;
      
      if (!equipoId || !fecha || !tipo) {
        showToast('Por favor completa los campos requeridos', 'warning');
        return;
      }
      
      const equipo = inventario.find(e => e.id === equipoId);
      if (!equipo) return;
      
      // Crear registro de mantenimiento
      const mantenimiento = {
        id: Date.now(),
        equipoId: equipoId,
        equipoNombre: `${equipo.marca} ${equipo.modelo} - ${equipo.area}`,
        fechaProgramada: fecha,
        fechaRegistro: new Date().toISOString().split('T')[0],
        tipo: tipo,
        descripcion: descripcion,
        prioridad: prioridad,
        estado: 'programado',
        responsable: 'Administrador'
      };
      
      maintenanceHistory.unshift(mantenimiento);
      guardarHistorialMantenimiento();
      renderHistorialMantenimiento();
      
      // Resolver alertas asociadas si existen
      const alertasEquipo = alerts.filter(a => a.equipoId === equipoId && a.estado === 'activa');
      alertasEquipo.forEach(alerta => {
        alerta.estado = 'resuelta';
        alerta.fechaResolucion = new Date().toISOString();
        alerta.mantenimientoId = mantenimiento.id;
      });
      
      guardarAlertas();
      renderAlertas();
      updateAlertCount();
      
      showToast(`Mantenimiento programado para ${equipo.marca} ${equipo.modelo}`, 'success');
      closeMaintenanceModal();
    }

    function renderHistorialMantenimiento() {
      historyList.innerHTML = '';
      
      // Mostrar solo los √∫ltimos 5 registros
      const historialReciente = maintenanceHistory.slice(0, 5);
      
      if (historialReciente.length === 0) {
        historyList.innerHTML = '<div class="no-alerts" style="font-size: 11px;">No hay historial de mantenimiento registrado.</div>';
        return;
      }
      
      historialReciente.forEach(mantenimiento => {
        const historyItem = document.createElement('div');
        historyItem.className = 'history-item';
        
        const fecha = new Date(mantenimiento.fechaProgramada);
        const fechaStr = fecha.toLocaleDateString();
        
        historyItem.innerHTML = `
          <div class="history-date">${fechaStr} - ${mantenimiento.tipo}</div>
          <div class="history-desc">${mantenimiento.equipoNombre}</div>
        `;
        
        historyList.appendChild(historyItem);
      });
    }

    // ============================================
    // CONFIGURACI√ìN DEL MODAL DE MANTENIMIENTO
    // ============================================
    closeModal.addEventListener('click', closeMaintenanceModal);
    cancelMaintenance.addEventListener('click', closeMaintenanceModal);
    saveMaintenance.addEventListener('click', saveMaintenanceSchedule);
    
    // Cerrar modal al hacer clic fuera
    maintenanceModal.addEventListener('click', (e) => {
      if (e.target === maintenanceModal) {
        closeMaintenanceModal();
      }
    });

    // ============================================
    // FUNCIONES EXISTENTES (backup, exportaci√≥n, etc.)
    // ============================================
    // [Las funciones existentes permanecen igual, solo agregu√© las nuevas funciones arriba]
    // Para mantener el c√≥digo manejable, no duplico todas las funciones aqu√≠
    // Pero mantengo las declaraciones de las funciones que se llaman

   // ============================================
// SISTEMA DE BACKUP Y EXPORTACI√ìN
// ============================================

function getBackups() {
  try {
    const backups = localStorage.getItem(CONFIG.STORAGE_KEYS.BACKUPS);
    return backups ? JSON.parse(backups) : [];
  } catch (e) {
    console.error("Error al leer backups:", e);
    return [];
  }
}

function saveBackups(backups) {
  try {
    // Mantener solo los √∫ltimos MAX_BACKUPS
    const trimmedBackups = backups.slice(0, CONFIG.MAX_BACKUPS);
    localStorage.setItem(CONFIG.STORAGE_KEYS.BACKUPS, JSON.stringify(trimmedBackups));
    return trimmedBackups;
  } catch (e) {
    console.error("Error al guardar backups:", e);
    showToast('Error al guardar backup', 'error');
    return backups;
  }
}

function createBackup() {
  try {
    const backup = {
      id: Date.now(),
      timestamp: new Date().toISOString(),
      data: [...inventario], // Copia profunda del inventario
      count: inventario.length,
      version: 'v2'
    };
    
    const backups = getBackups();
    backups.unshift(backup); // Agregar al inicio
    const saved = saveBackups(backups);
    
    return backup;
  } catch (e) {
    console.error("Error al crear backup:", e);
    return null;
  }
}

function createManualBackup() {
  // Mostrar indicador de carga
  btnBackupNow.innerHTML = '<span class="loader" style="width: 16px; height: 16px; border-width: 2px;"></span> Creando...';
  btnBackupNow.disabled = true;
  
  setTimeout(() => {
    const backup = createBackup();
    
    if (backup) {
      const date = new Date(backup.timestamp).toLocaleString();
      showToast(`Backup creado: ${date} (${backup.count} equipos)`, 'success');
      
      // Efecto visual de √©xito
      btnBackupNow.innerHTML = '‚úì Backup Creado';
      btnBackupNow.classList.add('success');
      
      setTimeout(() => {
        btnBackupNow.innerHTML = 'Crear Backup Ahora';
        btnBackupNow.classList.remove('success');
        btnBackupNow.disabled = false;
      }, 2000);
    } else {
      showToast('Error al crear backup', 'error');
      btnBackupNow.innerHTML = 'Crear Backup Ahora';
      btnBackupNow.disabled = false;
    }
  }, 800);
}

function restoreFromBackup() {
  const backups = getBackups();
  
  if (backups.length === 0) {
    showToast('No hay backups disponibles para restaurar', 'warning');
    return;
  }
  
  // Mostrar selector de backups
  const backupList = backups.map((b, i) => {
    const date = new Date(b.timestamp).toLocaleString();
    return `${i + 1}. ${date} - ${b.count} equipos`;
  }).join('\n');
  
  const choice = prompt(
    `Selecciona el backup a restaurar (1-${backups.length}):\n\n${backupList}`
  );
  
  const index = parseInt(choice) - 1;
  
  if (isNaN(index) || index < 0 || index >= backups.length) {
    showToast('Selecci√≥n inv√°lida', 'warning');
    return;
  }
  
  if (confirm(`¬øRestaurar backup del ${new Date(backups[index].timestamp).toLocaleString()}? Se perder√°n los datos actuales.`)) {
    inventario = [...backups[index].data]; // Copia profunda
    guardarInventario();
    renderTabla();
    
    showToast(`Backup restaurado: ${backups[index].count} equipos cargados`, 'success');
  }
}

function startAutoBackup() {
  // Crear backup inicial
  createBackup();
  
  // Configurar backup autom√°tico cada 24 horas
  autoBackupInterval = setInterval(() => {
    createBackup();
    console.log('Backup autom√°tico creado:', new Date().toLocaleString());
  }, CONFIG.AUTO_BACKUP_INTERVAL);
}

function exportToExcel() {
  if (inventario.length === 0) {
    showToast('No hay datos para exportar', 'warning');
    return;
  }
  
  // Mostrar indicador de carga
  btnExportBackup.innerHTML = '<span class="loader" style="width: 16px; height: 16px; border-width: 2px;"></span> Exportando...';
  btnExportBackup.disabled = true;
  
  setTimeout(() => {
    try {
      // Crear CSV
      const headers = [
        'ID', 'Categor√≠a', '√Årea', 'Marca', 'Modelo', 'No. Serie', 
        'No. Activo', 'IP', 'Fecha Alta', 'Estado', 'Usuario', 'Notas'
      ];
      
      const csvData = inventario.map(item => [
        item.id,
        `"${item.categoria || ''}"`,
        `"${item.area || ''}"`,
        `"${item.marca || ''}"`,
        `"${item.modelo || ''}"`,
        `"${item.serie || ''}"`,
        `"${item.activo || ''}"`,
        `"${item.ip || ''}"`,
        `"${item.fecha || ''}"`,
        `"${item.estado || ''}"`,
        `"${item.usuario || ''}"`,
        `"${(item.notas || '').replace(/"/g, '""')}"` // Escapar comillas
      ]);
      
      const csvContent = [
        headers.join(','),
        ...csvData.map(row => row.join(','))
      ].join('\n');
      
      // Crear y descargar archivo
      const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
      const link = document.createElement('a');
      const url = URL.createObjectURL(blob);
      
      link.setAttribute('href', url);
      link.setAttribute('download', `inventario_pacifica_${new Date().toISOString().split('T')[0]}.csv`);
      link.style.visibility = 'hidden';
      
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
      
      showToast(`Exportado: ${inventario.length} equipos a CSV`, 'success');
      
    } catch (e) {
      console.error('Error al exportar:', e);
      showToast('Error al exportar a CSV', 'error');
    } finally {
      btnExportBackup.innerHTML = 'Exportar a Excel';
      btnExportBackup.disabled = false;
    }
  }, 800);
}

function exportToCSV() {
  // Reutilizar la misma l√≥gica que exportToExcel
  exportToExcel();
}

function downloadFile(data, filename, type) {
  const blob = new Blob([data], { type: type });
  const url = URL.createObjectURL(blob);
  const link = document.createElement('a');
  
  link.href = url;
  link.download = filename;
  document.body.appendChild(link);
  link.click();
  document.body.removeChild(link);
  
  // Liberar memoria
  setTimeout(() => URL.revokeObjectURL(url), 100);
}

function showToast(message, type = 'info') {
  // Eliminar toast existente
  const existingToast = document.querySelector('.toast');
  if (existingToast) {
    existingToast.remove();
  }
  
  // Crear nuevo toast
  const toast = document.createElement('div');
  toast.className = `toast ${type}`;
  toast.textContent = message;
  
  document.body.appendChild(toast);
  
  // Auto-eliminar despu√©s de 4 segundos
  setTimeout(() => {
    if (toast.parentNode) {
      toast.style.opacity = '0';
      toast.style.transform = 'translateX(100%)';
      setTimeout(() => {
        if (toast.parentNode) {
          toast.remove();
        }
      }, 300);
    }
  }, 4000);
}

// ============================================
// FUNCI√ìN DE DATOS DE EJEMPLO (SEMILLA)
// ============================================

function loadSampleData() {
  if (inventario.length > 0 && !confirm('¬øReemplazar datos actuales con datos de ejemplo?')) {
    return;
  }
  
  // Mostrar indicador de carga
  btnSemilla.innerHTML = '<span class="loader" style="width: 16px; height: 16px; border-width: 2px;"></span> Cargando...';
  btnSemilla.disabled = true;
  
  setTimeout(() => {
    inventario = [
      {
        id: 1,
        categoria: "PC Escritorio",
        area: "Recepci√≥n",
        marca: "Dell",
        modelo: "OptiPlex 7090",
        serie: "ABC123456",
        activo: "PAC-001",
        ip: "192.168.1.10",
        fecha: "2023-01-15",
        estado: "√ìptimo",
        usuario: "Mar√≠a Gonz√°lez",
        notas: "Windows 10 Pro, 8GB RAM, SSD 256GB",
        ultimoEstadoCambio: "2024-01-15T10:30:00.000Z"
      },
      {
        id: 2,
        categoria: "Laptop",
        area: "Gerencia",
        marca: "HP",
        modelo: "EliteBook 840 G7",
        serie: "HP7890123",
        activo: "PAC-002",
        ip: "192.168.1.20",
        fecha: "2022-08-22",
        estado: "Regular",
        usuario: "Carlos Rodr√≠guez",
        notas: "Requiere mantenimiento preventivo, bater√≠a con desgaste",
        ultimoEstadoCambio: "2024-02-01T14:20:00.000Z"
      },
      {
        id: 3,
        categoria: "Impresora / Multifuncional",
        area: "Administraci√≥n",
        marca: "Epson",
        modelo: "WorkForce Pro WF-3720",
        serie: "EPS456789",
        activo: "PAC-003",
        ip: "192.168.1.30",
        fecha: "2021-11-10",
        estado: "Cr√≠tico",
        usuario: "Departamento Contabilidad",
        notas: "Atascos frecuentes, necesita revisi√≥n t√©cnica",
        ultimoEstadoCambio: "2024-02-15T09:15:00.000Z"
      },
      {
        id: 4,
        categoria: "Equipo de Red",
        area: "Sala de Servidores",
        marca: "Cisco",
        modelo: "Catalyst 2960-X",
        serie: "CIS789012",
        activo: "PAC-004",
        ip: "192.168.1.1",
        fecha: "2020-05-18",
        estado: "√ìptimo",
        usuario: "Sistemas",
        notas: "Switch principal, 24 puertos, ventilador ruidoso",
        ultimoEstadoCambio: "2024-01-10T16:45:00.000Z"
      },
      {
        id: 5,
        categoria: "Tel√©fono IP",
        area: "Reservaciones",
        marca: "Yealink",
        modelo: "T46S",
        serie: "YEA123456",
        activo: "PAC-005",
        ip: "192.168.1.50",
        fecha: "2023-03-30",
        estado: "√ìptimo",
        usuario: "Ana L√≥pez",
        notas: "Tel√©fono VoIP, configurado con extensi√≥n 101",
        ultimoEstadoCambio: "2024-01-30T11:10:00.000Z"
      },
      {
        id: 6,
        categoria: "Punto de Venta / POS",
        area: "Restaurante",
        marca: "Ingenico",
        modelo: "Move/3500",
        serie: "ING789012",
        activo: "PAC-006",
        ip: "192.168.2.10",
        fecha: "2022-12-05",
        estado: "Regular",
        usuario: "Restaurante Principal",
        notas: "Lector de tarjetas funciona intermitentemente",
        ultimoEstadoCambio: "2024-02-10T15:30:00.000Z"
      }
    ];
    
    guardarInventario();
    renderTabla();
    checkAlerts(); // Verificar alertas con los nuevos datos
    
    showToast('Datos de ejemplo cargados correctamente', 'success');
    
    // Restaurar bot√≥n
    btnSemilla.innerHTML = 'Cargar ejemplo';
    btnSemilla.disabled = false;
  }, 1000);
}

    // ============================================
    // INICIALIZACI√ìN
    // ============================================
    document.addEventListener('DOMContentLoaded', () => {
      initAuth();
      
      // Tecla Enter para enviar
      document.addEventListener('keypress', function(e) {
        if (e.key === 'Enter' && document.activeElement === passwordInput) {
          loginForm.dispatchEvent(new Event('submit'));
        }
      });
    });

    // Prevenir que los usuarios salgan sin guardar
    window.addEventListener('beforeunload', (e) => {
      if (inventario.length > 0) {
        // Crear un √∫ltimo backup antes de salir
        createBackup();
      }
    });

    // A√±adir animaci√≥n de pulso para CSS
    const style = document.createElement('style');
    style.textContent = `
      @keyframes pulse {
        0% { transform: scale(1); }
        50% { transform: scale(1.1); }
        100% { transform: scale(1); }
      }
    `;
    document.head.appendChild(style);
  </script>
  <!-- Al final del body -->
<script>
// Registrar Service Worker para funcionamiento offline
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('./service-worker.js')
      .then(reg => console.log('Service Worker registrado:', reg))
      .catch(err => console.log('Error SW:', err));
  });
}

// Detectar estado de conexi√≥n
window.addEventListener('online', () => {
  showToast('Conexi√≥n restablecida', 'success');
});

window.addEventListener('offline', () => {
  showToast('Est√°s trabajando en modo offline', 'warning');
});

// Verificar conexi√≥n al cargar
if (!navigator.onLine) {
  setTimeout(() => {
    showToast('Modo offline activado - Los datos se guardar√°n localmente', 'warning');
  }, 1000);
}
</script>
</body>
</html>



