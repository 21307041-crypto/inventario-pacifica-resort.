<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Inventario de Equipo de Cómputo - Pacífica Resort Ixtapa</title>

  <!-- Fuente -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <style>
    :root {
      --primary: #2563eb;
      --primary-soft: #dbeafe;
      --bg: #020617;
      --card-bg: #020617;
      --card-border: #1e293b;
      --accent: #22c55e;
      --danger: #ef4444;
      --text: #e5e7eb;
      --muted: #9ca3af;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: "Poppins", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #1f2937, #020617);
      color: var(--text);
      min-height: 100vh;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 1rem 1rem 1.5rem;
    }

    /* Encabezado simple */
    .app-header {
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      gap: 0.75rem;
      margin-bottom: 1.25rem;
      flex-wrap: wrap;
    }

    .app-title {
      font-size: 1.4rem;
      font-weight: 700;
      letter-spacing: 0.03em;
      margin: 0;
      background: linear-gradient(90deg, #f97316, #22c55e, #3b82f6, #a855f7);
      background-size: 200% 200%;
      -webkit-background-clip: text;
      color: transparent;
      animation: gradientMove 6s ease infinite;
    }

    .app-subtitle {
      margin: 0.15rem 0 0;
      font-size: 0.85rem;
      color: var(--muted);
      max-width: 620px;
    }

    .app-tag {
      font-size: 0.75rem;
      padding: 0.25rem 0.7rem;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.5);
      background: rgba(15, 23, 42, 0.7);
      backdrop-filter: blur(10px);
      align-self: center;
      white-space: nowrap;
    }

    @keyframes gradientMove {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    /* Layout principal */
    .layout {
      display: grid;
      grid-template-columns: minmax(0, 1fr) minmax(0, 1.5fr);
      gap: 1.25rem;
      align-items: flex-start;
    }

    @media (max-width: 900px) {
      .layout {
        grid-template-columns: 1fr;
      }
    }

    .card {
      background: rgba(15, 23, 42, 0.92);
      border-radius: 1rem;
      padding: 1rem;
      border: 1px solid var(--card-border);
      box-shadow: 0 16px 40px rgba(15, 23, 42, 0.7);
    }

    @media (max-width: 600px) {
      .card {
        padding: 0.85rem;
      }
    }

    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      margin-bottom: 0.85rem;
      gap: 0.75rem;
      flex-wrap: wrap;
    }

    .card-title {
      font-size: 1rem;
      font-weight: 600;
      margin: 0;
    }

    .card-subtitle {
      font-size: 0.78rem;
      color: var(--muted);
      margin: 0.15rem 0 0;
    }

    .pill {
      font-size: 0.75rem;
      padding: 0.1rem 0.55rem;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.4);
      color: var(--muted);
      white-space: nowrap;
    }

    /* Formulario */
    form {
      display: grid;
      grid-template-columns: 1fr;
      gap: 0.7rem;
    }

    .form-row {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 0.7rem;
    }

    @media (max-width: 700px) {
      .form-row {
        grid-template-columns: 1fr;
      }
    }

    label {
      display: block;
      font-size: 0.78rem;
      margin-bottom: 0.15rem;
      color: var(--muted);
    }

    input, select, textarea {
      width: 100%;
      padding: 0.4rem 0.55rem;
      border-radius: 0.6rem;
      border: 1px solid #1f2937;
      background: #020617;
      color: var(--text);
      font-size: 0.85rem;
      outline: none;
      transition: border 0.15s ease, box-shadow 0.15s ease, background 0.15s ease;
    }

    input:focus, select:focus, textarea:focus {
      border-color: var(--primary);
      box-shadow: 0 0 0 1px rgba(37, 99, 235, 0.6);
      background: #020617;
    }

    textarea {
      min-height: 60px;
      resize: vertical;
    }

    .btn-row {
      display: flex;
      gap: 0.5rem;
      justify-content: flex-end;
      margin-top: 0.1rem;
      flex-wrap: wrap;
    }

    .btn {
      border-radius: 999px;
      padding: 0.35rem 0.9rem;
      border: none;
      font-size: 0.83rem;
      font-weight: 500;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 0.3rem;
      white-space: nowrap;
    }

    .btn-primary {
      background: linear-gradient(135deg, #2563eb, #4f46e5);
      color: white;
    }

    .btn-secondary {
      background: rgba(15, 23, 42, 0.92);
      border: 1px solid #1f2937;
      color: var(--text);
    }

    .btn-danger {
      background: rgba(239, 68, 68, 0.12);
      border: 1px solid rgba(248, 113, 113, 0.6);
      color: #fecaca;
    }

    .btn-sm {
      padding: 0.2rem 0.6rem;
      font-size: 0.75rem;
    }

    .btn:disabled {
      opacity: 0.6;
      cursor: default;
    }

    /* Toolbar y filtros */
    .toolbar {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      align-items: center;
      margin-bottom: 0.7rem;
    }

    .toolbar-left {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      align-items: center;
      flex: 1;
    }

    .toolbar-right {
      display: flex;
      gap: 0.5rem;
      align-items: center;
    }

    .input-inline {
      max-width: 220px;
      flex: 1;
      min-width: 130px;
    }

    .select-inline {
      max-width: 160px;
      min-width: 120px;
    }

    @media (max-width: 600px) {
      .toolbar-left,
      .toolbar-right {
        width: 100%;
        justify-content: flex-start;
      }
    }

    /* Tabla */
    .table-scroll {
      max-height: 420px;
      overflow-y: auto;
      border-radius: 0.8rem;
      border: 1px solid #020617;
      background: #020617;
      overflow-x: auto;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.8rem;
      min-width: 720px;
    }

    thead {
      background: rgba(15, 23, 42, 0.98);
    }

    th, td {
      padding: 0.45rem 0.4rem;
      border-bottom: 1px solid #111827;
      text-align: left;
    }

    th {
      font-weight: 500;
      color: var(--muted);
      font-size: 0.75rem;
      white-space: nowrap;
    }

    tbody tr:hover {
      background: rgba(15, 23, 42, 0.9);
    }

    .status-chip {
      font-size: 0.7rem;
      padding: 0.08rem 0.5rem;
      border-radius: 999px;
      border: 1px solid transparent;
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
    }

    .status-optimo {
      background: rgba(22, 163, 74, 0.15);
      border-color: rgba(34, 197, 94, 0.6);
      color: #bbf7d0;
    }

    .status-regular {
      background: rgba(234, 179, 8, 0.12);
      border-color: rgba(250, 204, 21, 0.6);
      color: #fef3c7;
    }

    .status-critico {
      background: rgba(239, 68, 68, 0.12);
      border-color: rgba(248, 113, 113, 0.6);
      color: #fecaca;
    }

    .empty-state {
      text-align: center;
      padding: 1.1rem;
      font-size: 0.85rem;
      color: var(--muted);
    }

    .footer {
      margin-top: 0.9rem;
      font-size: 0.74rem;
      color: var(--muted);
      text-align: right;
    }

    @media (max-width: 600px) {
      .footer {
        text-align: left;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Encabezado -->
    <header class="app-header">
      <div>
        <h1 class="app-title">Inventario de Equipo de Cómputo</h1>
        <p class="app-subtitle">
          Sistema web estático para registrar, consultar y exportar el inventario de equipo de cómputo de
          <strong>Pacífica Resort Ixtapa</strong>.
        </p>
      </div>
      <div class="app-tag">
        Área de Sistemas · Control de activos
      </div>
    </header>

    <main class="layout">
      <!-- Columna izquierda: Formulario -->
      <section class="card">
        <div class="card-header">
          <div>
            <h2 class="card-title">Registrar / editar equipo</h2>
            <p class="card-subtitle">Captura la información técnica y de ubicación del equipo.</p>
          </div>
        </div>

        <form id="inventory-form">
          <input type="hidden" id="item-id" />

          <div class="form-row">
            <div>
              <label for="categoria">Categoría</label>
              <select id="categoria" required>
                <option value="">Selecciona una opción</option>
                <option value="PC Escritorio">PC Escritorio</option>
                <option value="Laptop">Laptop</option>
                <option value="Impresora / Multifuncional">Impresora / Multifuncional</option>
                <option value="Equipo de Red">Equipo de Red</option>
                <option value="Teléfono IP">Teléfono IP</option>
                <option value="Servidor">Servidor</option>
                <option value="Punto de Venta / POS">Punto de Venta / POS</option>
                <option value="Otro">Otro</option>
              </select>
            </div>
            <div>
              <label for="area">Área / departamento</label>
              <input id="area" type="text" placeholder="Recepción, Reservaciones, Administración..." required />
            </div>
          </div>

          <div class="form-row">
            <div>
              <label for="marca">Marca</label>
              <input id="marca" type="text" placeholder="Dell, HP, Lenovo, Epson..." required />
            </div>
            <div>
              <label for="modelo">Modelo</label>
              <input id="modelo" type="text" placeholder="Ej: OptiPlex 7090" required />
            </div>
          </div>

          <div class="form-row">
            <div>
              <label for="serie">Número de serie</label>
              <input id="serie" type="text" placeholder="S/N del fabricante" />
            </div>
            <div>
              <label for="activo">No. de activo / etiqueta hotel</label>
              <input id="activo" type="text" placeholder="Código interno del hotel" />
            </div>
          </div>

          <div class="form-row">
            <div>
              <label for="ip">Dirección IP (si aplica)</label>
              <input id="ip" type="text" placeholder="192.168.x.x" />
            </div>
            <div>
              <label for="fecha">Fecha de alta / adquisición</label>
              <input id="fecha" type="date" />
            </div>
          </div>

          <div class="form-row">
            <div>
              <label for="estado">Estado del equipo</label>
              <select id="estado" required>
                <option value="">Selecciona una opción</option>
                <option value="Óptimo">Óptimo</option>
                <option value="Regular">Regular</option>
                <option value="Crítico">Crítico</option>
              </select>
            </div>
            <div>
              <label for="usuario">Usuario / responsable</label>
              <input id="usuario" type="text" placeholder="Nombre del usuario o área responsable" />
            </div>
          </div>

          <div>
            <label for="notas">Notas técnicas / observaciones</label>
            <textarea id="notas" placeholder="Detalles de hardware, software, licencias, incidencias recientes, etc."></textarea>
          </div>

          <div class="btn-row">
            <button type="button" class="btn btn-secondary" id="btn-cancelar" disabled>Cancelar edición</button>
            <button type="submit" class="btn btn-primary" id="btn-guardar">
              Guardar equipo
            </button>
          </div>
        </form>
      </section>

      <!-- Columna derecha: Tabla -->
      <section class="card">
        <div class="card-header">
          <div>
            <h2 class="card-title">Inventario registrado</h2>
            <p class="card-subtitle">
              Consulta, filtra y exporta el inventario guardado en este navegador.
            </p>
          </div>
          <div class="pill">
            Total de equipos: <span id="total-equipos">0</span>
          </div>
        </div>

        <div class="toolbar">
          <div class="toolbar-left">
            <input
              id="busqueda"
              type="text"
              class="input-inline"
              placeholder="Buscar por marca, modelo, área, usuario..."
            />
            <select id="filtro-categoria" class="select-inline">
              <option value="">Todas las categorías</option>
              <option value="PC Escritorio">PC Escritorio</option>
              <option value="Laptop">Laptop</option>
              <option value="Impresora / Multifuncional">Impresora / Multifuncional</option>
              <option value="Equipo de Red">Equipo de Red</option>
              <option value="Teléfono IP">Teléfono IP</option>
              <option value="Servidor">Servidor</option>
              <option value="Punto de Venta / POS">Punto de Venta / POS</option>
              <option value="Otro">Otro</option>
            </select>
            <select id="filtro-estado" class="select-inline">
              <option value="">Todos los estados</option>
              <option value="Óptimo">Óptimo</option>
              <option value="Regular">Regular</option>
              <option value="Crítico">Crítico</option>
            </select>
          </div>
          <div class="toolbar-right">
            <button id="btn-exportar" class="btn btn-secondary btn-sm">
              Exportar CSV
            </button>
            <button id="btn-semilla" class="btn btn-secondary btn-sm">
              Cargar ejemplo
            </button>
          </div>
        </div>

        <div class="table-scroll">
          <table>
            <thead>
              <tr>
                <th>Categoría</th>
                <th>Área</th>
                <th>Marca / modelo</th>
                <th>Activo</th>
                <th>IP</th>
                <th>Estado</th>
                <th>Usuario</th>
                <th>Acciones</th>
              </tr>
            </thead>
            <tbody id="tabla-cuerpo">
              <!-- Filas dinámicas -->
            </tbody>
          </table>
          <div id="empty-state" class="empty-state" style="display: none;">
            No hay equipos registrados todavía. Usa el formulario de la izquierda para agregar el primero.
          </div>
        </div>

        <div class="footer">
          Inventario de Sistemas · Pacífica Resort Ixtapa
        </div>
      </section>
    </main>
  </div>

  <script>
    const STORAGE_KEY = "inventarioPacificaResortIxtapa";

    let inventario = [];

    const form = document.getElementById("inventory-form");
    const inputId = document.getElementById("item-id");
    const inputCategoria = document.getElementById("categoria");
    const inputArea = document.getElementById("area");
    const inputMarca = document.getElementById("marca");
    const inputModelo = document.getElementById("modelo");
    const inputSerie = document.getElementById("serie");
    const inputActivo = document.getElementById("activo");
    const inputIp = document.getElementById("ip");
    const inputFecha = document.getElementById("fecha");
    const inputEstado = document.getElementById("estado");
    const inputUsuario = document.getElementById("usuario");
    const inputNotas = document.getElementById("notas");

    const tablaCuerpo = document.getElementById("tabla-cuerpo");
    const emptyState = document.getElementById("empty-state");
    const totalEquiposLabel = document.getElementById("total-equipos");

    const busqueda = document.getElementById("busqueda");
    const filtroCategoria = document.getElementById("filtro-categoria");
    const filtroEstado = document.getElementById("filtro-estado");

    const btnExportar = document.getElementById("btn-exportar");
    const btnSemilla = document.getElementById("btn-semilla");
    const btnCancelar = document.getElementById("btn-cancelar");
    const btnGuardar = document.getElementById("btn-guardar");

    function cargarInventario() {
      try {
        const data = localStorage.getItem(STORAGE_KEY);
        inventario = data ? JSON.parse(data) : [];
      } catch (e) {
        console.error("Error al leer localStorage:", e);
        inventario = [];
      }
      renderTabla();
    }

    function guardarInventario() {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(inventario));
    }

    function limpiarFormulario() {
      inputId.value = "";
      inputCategoria.value = "";
      inputArea.value = "";
      inputMarca.value = "";
      inputModelo.value = "";
      inputSerie.value = "";
      inputActivo.value = "";
      inputIp.value = "";
      inputFecha.value = "";
      inputEstado.value = "";
      inputUsuario.value = "";
      inputNotas.value = "";
    }

    function modoEdicion(activado) {
      if (activado) {
        btnCancelar.disabled = false;
        btnGuardar.textContent = "Actualizar equipo";
      } else {
        btnCancelar.disabled = true;
        btnGuardar.textContent = "Guardar equipo";
        limpiarFormulario();
      }
    }

    function estadoClass(estado) {
      if (estado === "Óptimo") return "status-chip status-optimo";
      if (estado === "Regular") return "status-chip status-regular";
      if (estado === "Crítico") return "status-chip status-critico";
      return "status-chip";
    }

    function renderTabla() {
      const texto = busqueda.value.toLowerCase().trim();
      const cat = filtroCategoria.value;
      const est = filtroEstado.value;

      let filtrados = inventario.filter((item) => {
        const matchTexto =
          !texto ||
          (item.categoria || "").toLowerCase().includes(texto) ||
          (item.area || "").toLowerCase().includes(texto) ||
          (item.marca || "").toLowerCase().includes(texto) ||
          (item.modelo || "").toLowerCase().includes(texto) ||
          (item.usuario || "").toLowerCase().includes(texto);

        const matchCategoria = !cat || item.categoria === cat;
        const matchEstado = !est || item.estado === est;

        return matchTexto && matchCategoria && matchEstado;
      });

      tablaCuerpo.innerHTML = "";

      if (filtrados.length === 0) {
        emptyState.style.display = "block";
      } else {
        emptyState.style.display = "none";

        filtrados.forEach((item) => {
          const tr = document.createElement("tr");

          tr.innerHTML = `
            <td>${item.categoria || ""}</td>
            <td>${item.area || ""}</td>
            <td>
              <div><strong>${item.marca || ""}</strong></div>
              <div style="font-size: 0.75rem; color: #9ca3af;">${item.modelo || ""}</div>
            </td>
            <td>${item.activo || ""}</td>
            <td style="font-size: 0.75rem;">${item.ip || ""}</td>
            <td>
              <span class="${estadoClass(item.estado)}">${item.estado || ""}</span>
            </td>
            <td style="font-size: 0.75rem;">${item.usuario || ""}</td>
            <td>
              <div style="display:flex; gap:0.25rem; flex-wrap:wrap;">
                <button class="btn btn-secondary btn-sm" data-accion="editar" data-id="${item.id}">Editar</button>
                <button class="btn btn-danger btn-sm" data-accion="eliminar" data-id="${item.id}">Eliminar</button>
              </div>
            </td>
          `;
          tablaCuerpo.appendChild(tr);
        });
      }

      totalEquiposLabel.textContent = inventario.length;
    }

    form.addEventListener("submit", (e) => {
      e.preventDefault();

      const payload = {
        id: inputId.value ? Number(inputId.value) : Date.now(),
        categoria: inputCategoria.value,
        area: inputArea.value.trim(),
        marca: inputMarca.value.trim(),
        modelo: inputModelo.value.trim(),
        serie: inputSerie.value.trim(),
        activo: inputActivo.value.trim(),
        ip: inputIp.value.trim(),
        fecha: inputFecha.value,
        estado: inputEstado.value,
        usuario: inputUsuario.value.trim(),
        notas: inputNotas.value.trim(),
      };

      if (!payload.categoria || !payload.area || !payload.marca || !payload.modelo || !payload.estado) {
        alert("Por favor completa al menos categoría, área, marca, modelo y estado.");
        return;
      }

      if (inputId.value) {
        const index = inventario.findIndex((i) => i.id === payload.id);
        if (index !== -1) {
          inventario[index] = payload;
        }
      } else {
        inventario.push(payload);
      }

      guardarInventario();
      renderTabla();
      modoEdicion(false);
    });

    btnCancelar.addEventListener("click", () => {
      modoEdicion(false);
    });

    tablaCuerpo.addEventListener("click", (e) => {
      const btn = e.target.closest("button");
      if (!btn) return;

      const accion = btn.getAttribute("data-accion");
      const id = Number(btn.getAttribute("data-id"));
      const item = inventario.find((i) => i.id === id);
      if (!item) return;

      if (accion === "editar") {
        inputId.value = item.id;
        inputCategoria.value = item.categoria || "";
        inputArea.value = item.area || "";
        inputMarca.value = item.marca || "";
        inputModelo.value = item.modelo || "";
        inputSerie.value = item.serie || "";
        inputActivo.value = item.activo || "";
        inputIp.value = item.ip || "";
        inputFecha.value = item.fecha || "";
        inputEstado.value = item.estado || "";
        inputUsuario.value = item.usuario || "";
        inputNotas.value = item.notas || "";
        modoEdicion(true);
        window.scrollTo({ top: 0, behavior: "smooth" });
      }

      if (accion === "eliminar") {
        const confirmar = confirm("¿Seguro que deseas eliminar este equipo del inventario?");
        if (!confirmar) return;
        inventario = inventario.filter((i) => i.id !== id);
        guardarInventario();
        renderTabla();
      }
    });

    [busqueda, filtroCategoria, filtroEstado].forEach((el) => {
      el.addEventListener("input", renderTabla);
      el.addEventListener("change", renderTabla);
    });

    btnExportar.addEventListener("click", () => {
      if (inventario.length === 0) {
        alert("No hay equipos en el inventario para exportar.");
        return;
      }

      const encabezados = [
        "ID",
        "Categoría",
        "Área",
        "Marca",
        "Modelo",
        "Número de serie",
        "No. activo",
        "IP",
        "Fecha alta",
        "Estado",
        "Usuario",
        "Notas",
      ];

      const filas = inventario.map((item) => [
        item.id,
        item.categoria || "",
        item.area || "",
        item.marca || "",
        item.modelo || "",
        item.serie || "",
        item.activo || "",
        item.ip || "",
        item.fecha || "",
        item.estado || "",
        item.usuario || "",
        (item.notas || "").replace(/\n/g, " "),
      ]);

      const data = [encabezados, ...filas]
        .map((fila) =>
          fila
            .map((campo) => {
              const c = String(campo).replace(/"/g, '""');
              return `"${c}"`;
            })
            .join(",")
        )
        .join("\n");

      const blob = new Blob([data], { type: "text/csv;charset=utf-8;" });
      const url = URL.createObjectURL(blob);
      const link = document.createElement("a");
      link.href = url;
      link.download = "inventario_pacifica_resort_ixtapa.csv";
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
      URL.revokeObjectURL(url);
    });

    btnSemilla.addEventListener("click", () => {
      if (inventario.length > 0) {
        const ok = confirm("Esto agregará ejemplos al inventario actual. ¿Deseas continuar?");
        if (!ok) return;
      }

      const base = Date.now();

      const ejemplos = [
        {
          id: base,
          categoria: "PC Escritorio",
          area: "Recepción",
          marca: "Dell",
          modelo: "OptiPlex 7090",
          serie: "SN-DEL-REC-001",
          activo: "PAC-IT-001",
          ip: "192.168.10.21",
          fecha: "2023-07-15",
          estado: "Óptimo",
          usuario: "Recepción Front Desk",
          notas: "Equipo principal para PMS del hotel, Windows 11 Pro, Office 365 licenciado."
        },
        {
          id: base + 1,
          categoria: "Laptop",
          area: "Gerencia General",
          marca: "HP",
          modelo: "EliteBook 840 G7",
          serie: "SN-HP-GER-002",
          activo: "PAC-IT-015",
          ip: "192.168.10.35",
          fecha: "2022-03-10",
          estado: "Óptimo",
          usuario: "Gerencia General",
          notas: "Uso administrativo, acceso VPN a sistema corporativo, respaldos semanales."
        },
        {
          id: base + 2,
          categoria: "Impresora / Multifuncional",
          area: "Administración",
          marca: "Epson",
          modelo: "WorkForce Pro WF-4740",
          serie: "SN-EPS-ADM-003",
          activo: "PAC-IT-030",
          ip: "192.168.10.55",
          fecha: "2021-11-02",
          estado: "Regular",
          usuario: "Administración",
          notas: "Reporta atascos de papel esporádicos; requiere mantenimiento preventivo."
        }
      ];

      inventario = inventario.concat(ejemplos);
      guardarInventario();
      renderTabla();
    });

    document.addEventListener("DOMContentLoaded", cargarInventario);
  </script>
</body>
</html>
