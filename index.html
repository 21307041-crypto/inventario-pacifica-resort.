<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes" />
  <title>Sistema de Inventario - Pac√≠fica Resort Ixtapa</title>

  <!-- Fuente -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  <!-- Favicon del hotel -->
  <link rel="icon" type="image/x-icon" href="https://img.icons8.com/color/96/000000/resort.png">

  <style>
    :root {
      --primary: #2563eb;
      --primary-dark: #1d4ed8;
      --primary-soft: #dbeafe;
      --bg: #020617;
      --card-bg: #0f172a;
      --card-border: #1e293b;
      --accent: #22c55e;
      --danger: #ef4444;
      --warning: #f59e0b;
      --text: #e5e7eb;
      --muted: #9ca3af;
      --radius: 12px;
      --shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
      --safe-top: env(safe-area-inset-top, 0px);
      --safe-bottom: env(safe-area-inset-bottom, 0px);
      --safe-left: env(safe-area-inset-left, 0px);
      --safe-right: env(safe-area-inset-right, 0px);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent;
    }

    html {
      font-size: 16px;
      scroll-behavior: smooth;
    }

    body {
      font-family: 'Poppins', sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      padding-left: var(--safe-left);
      padding-right: var(--safe-right);
      padding-top: var(--safe-top);
      padding-bottom: var(--safe-bottom);
    }

    /* ========== RESPONSIVE BREAKPOINTS ========== */
    @media (max-width: 768px) {
      html { font-size: 15px; }
    }
    
    @media (max-width: 480px) {
      html { font-size: 14px; }
    }
    
    @media (max-width: 360px) {
      html { font-size: 13px; }
    }

    /* ========== LOGIN SCREEN ========== */
    .login-screen {
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      min-height: -webkit-fill-available;
      padding: 20px;
      padding: max(20px, var(--safe-top)) max(20px, var(--safe-right)) max(20px, var(--safe-bottom)) max(20px, var(--safe-left));
      background: var(--bg);
      background-image: 
        radial-gradient(circle at 10% 20%, rgba(37, 99, 235, 0.05) 0%, transparent 20%),
        radial-gradient(circle at 90% 80%, rgba(34, 197, 94, 0.05) 0%, transparent 20%);
    }

    .login-card {
      background: var(--card-bg);
      border: 1px solid var(--card-border);
      border-radius: var(--radius);
      padding: clamp(1.5rem, 5vw, 2.5rem);
      width: 100%;
      max-width: min(420px, 90vw);
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
    }

    .hotel-branding {
      text-align: center;
      margin-bottom: clamp(1.5rem, 4vw, 2rem);
    }

    .hotel-logo {
      font-size: clamp(2.5rem, 8vw, 3.5rem);
      margin-bottom: 0.75rem;
      display: inline-block;
      padding: clamp(0.75rem, 3vw, 1rem);
      background: linear-gradient(135deg, var(--primary), #3b82f6);
      border-radius: 50%;
      color: white;
      line-height: 1;
    }

    .hotel-name {
      font-size: clamp(1.25rem, 5vw, 1.5rem);
      font-weight: 700;
      background: linear-gradient(to right, var(--primary), var(--accent));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 0.5rem;
      line-height: 1.3;
    }

    .hotel-subtitle {
      color: var(--muted);
      font-size: clamp(0.75rem, 3vw, 0.875rem);
      font-weight: 400;
      letter-spacing: 0.5px;
    }

    .system-name {
      text-align: center;
      font-size: clamp(0.875rem, 3.5vw, 1.125rem);
      font-weight: 600;
      margin-bottom: clamp(1.5rem, 4vw, 2rem);
      padding-bottom: clamp(1rem, 3vw, 1.25rem);
      border-bottom: 1px solid var(--card-border);
    }

    .form-group {
      margin-bottom: clamp(1rem, 3vw, 1.5rem);
    }

    .form-label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 500;
      color: var(--text);
      font-size: clamp(0.75rem, 3vw, 0.875rem);
    }

    .form-input {
      width: 100%;
      padding: clamp(0.75rem, 2.5vw, 0.875rem) clamp(1rem, 2.5vw, 1rem);
      background: rgba(30, 41, 59, 0.5);
      border: 1px solid var(--card-border);
      border-radius: 8px;
      color: var(--text);
      font-family: 'Poppins', sans-serif;
      font-size: clamp(0.875rem, 3vw, 0.9375rem);
      transition: all 0.3s ease;
      -webkit-appearance: none;
      appearance: none;
    }

    .form-input:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.2);
    }

    .password-container {
      position: relative;
    }

    .toggle-password {
      position: absolute;
      right: clamp(0.75rem, 2vw, 1rem);
      top: 50%;
      transform: translateY(-50%);
      background: none;
      border: none;
      color: var(--muted);
      cursor: pointer;
      font-size: clamp(1rem, 3vw, 1.125rem);
      padding: 0.25rem;
      width: clamp(2rem, 5vw, 2.5rem);
      height: clamp(2rem, 5vw, 2.5rem);
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      transition: background-color 0.2s ease;
    }

    .toggle-password:active {
      background-color: rgba(255, 255, 255, 0.1);
    }

    .login-btn {
      width: 100%;
      padding: clamp(0.875rem, 3vw, 0.9375rem);
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      color: white;
      border: none;
      border-radius: 8px;
      font-family: 'Poppins', sans-serif;
      font-size: clamp(0.875rem, 3vw, 1rem);
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      margin-top: 0.625rem;
      min-height: 3rem;
    }

    .login-btn:hover,
    .login-btn:active {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(37, 99, 235, 0.4);
    }

    .login-btn:active {
      transform: translateY(0);
    }

    .error-message {
      background: rgba(239, 68, 68, 0.1);
      border: 1px solid var(--danger);
      color: var(--danger);
      padding: clamp(0.75rem, 2vw, 1rem);
      border-radius: 8px;
      margin-bottom: 1.25rem;
      font-size: clamp(0.75rem, 2.5vw, 0.875rem);
      display: none;
      line-height: 1.4;
    }

    .credentials-hint {
      background: rgba(245, 158, 11, 0.1);
      border: 1px solid var(--warning);
      color: var(--warning);
      padding: clamp(0.75rem, 2vw, 1rem);
      border-radius: 8px;
      margin-top: 1.5rem;
      font-size: clamp(0.6875rem, 2.5vw, 0.8125rem);
      text-align: center;
      line-height: 1.4;
    }

    .login-footer {
      text-align: center;
      margin-top: clamp(1.5rem, 4vw, 2rem);
      color: var(--muted);
      font-size: clamp(0.6875rem, 2.5vw, 0.8125rem);
      line-height: 1.4;
    }

    .login-footer a {
      color: var(--primary);
      text-decoration: none;
      word-break: break-all;
    }

    /* ========== MAIN APP ========== */
    .app-container {
      display: none;
      min-height: 100vh;
      min-height: -webkit-fill-available;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: clamp(0.75rem, 2vw, 1rem) clamp(0.75rem, 2vw, 1rem) clamp(1rem, 2vw, 1.5rem);
    }

    /* Encabezado responsive */
    .app-header {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      margin-bottom: 1.5rem;
    }
    
    @media (min-width: 768px) {
      .app-header {
        flex-direction: row;
        align-items: flex-start;
        justify-content: space-between;
        gap: 0.75rem;
      }
    }

    .app-title-area {
      flex: 1;
    }

    .app-title {
      font-size: clamp(1.25rem, 5vw, 1.75rem);
      font-weight: 700;
      letter-spacing: 0.03em;
      margin: 0;
      background: linear-gradient(90deg, #f97316, #22c55e, #3b82f6, #a855f7);
      background-size: 200% 200%;
      -webkit-background-clip: text;
      color: transparent;
      animation: gradientMove 6s ease infinite;
      line-height: 1.3;
    }

    .app-subtitle {
      margin: 0.5rem 0 0;
      font-size: clamp(0.75rem, 2.5vw, 0.85rem);
      color: var(--muted);
      max-width: 100%;
      line-height: 1.4;
    }

    .user-info {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.75rem;
      background: rgba(30, 41, 59, 0.5);
      border-radius: 10px;
      border: 1px solid var(--card-border);
      width: 100%;
      justify-content: space-between;
      order: -1;
    }
    
    @media (min-width: 768px) {
      .user-info {
        order: 1;
        width: auto;
        justify-content: flex-start;
      }
    }

    .user-avatar {
      width: 2.5rem;
      height: 2.5rem;
      min-width: 2.5rem;
      border-radius: 50%;
      background: linear-gradient(135deg, #2563eb, #22c55e);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 1rem;
    }

    .user-details {
      flex: 1;
    }

    .user-details div:first-child {
      font-size: 0.85rem;
      font-weight: 500;
    }

    .user-details div:last-child {
      font-size: 0.75rem;
      color: var(--muted);
    }

    .logout-btn {
      background: rgba(239, 68, 68, 0.1);
      border: 1px solid var(--danger);
      color: #fecaca;
      padding: 0.5rem 0.75rem;
      border-radius: 6px;
      cursor: pointer;
      font-size: 0.75rem;
      white-space: nowrap;
    }

    .logout-btn:hover {
      background: rgba(239, 68, 68, 0.2);
    }

    .logout-btn:active {
      transform: scale(0.95);
    }

    /* Layout principal responsive */
    .layout {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }
    
    @media (min-width: 900px) {
      .layout {
        display: grid;
        grid-template-columns: minmax(0, 1fr) minmax(0, 1.5fr);
        gap: 1.25rem;
        align-items: flex-start;
      }
    }

    .card {
      background: rgba(15, 23, 42, 0.92);
      border-radius: 1rem;
      padding: clamp(0.75rem, 2vw, 1rem);
      border: 1px solid var(--card-border);
      box-shadow: 0 16px 40px rgba(15, 23, 42, 0.7);
      width: 100%;
      overflow: hidden;
    }

    .card-header {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      margin-bottom: 1rem;
    }
    
    @media (min-width: 480px) {
      .card-header {
        flex-direction: row;
        justify-content: space-between;
        align-items: baseline;
        gap: 0.75rem;
      }
    }

    .card-title {
      font-size: clamp(1rem, 3vw, 1.125rem);
      font-weight: 600;
      margin: 0;
      line-height: 1.3;
    }

    .card-subtitle {
      font-size: clamp(0.75rem, 2.5vw, 0.85rem);
      color: var(--muted);
      margin: 0.25rem 0 0;
      line-height: 1.4;
    }

    .pill {
      font-size: clamp(0.75rem, 2.5vw, 0.85rem);
      padding: 0.25rem 0.75rem;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.5);
      background: rgba(15, 23, 42, 0.7);
      backdrop-filter: blur(10px);
      white-space: nowrap;
      align-self: flex-start;
    }

    /* Formulario responsive */
    form {
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
    }

    .form-row {
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
    }
    
    @media (min-width: 700px) {
      .form-row {
        display: grid;
        grid-template-columns: repeat(2, minmax(0, 1fr));
        gap: 0.75rem;
      }
    }

    label {
      display: block;
      font-size: clamp(0.75rem, 2.5vw, 0.85rem);
      margin-bottom: 0.25rem;
      color: var(--muted);
    }

    input, select, textarea {
      width: 100%;
      padding: 0.75rem;
      border-radius: 0.75rem;
      border: 1px solid #1f2937;
      background: #020617;
      color: var(--text);
      font-size: clamp(0.85rem, 2.5vw, 0.95rem);
      outline: none;
      transition: border 0.15s ease, box-shadow 0.15s ease, background 0.15s ease;
      -webkit-appearance: none;
      appearance: none;
      min-height: 2.75rem;
    }

    select {
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%239ca3af' viewBox='0 0 16 16'%3E%3Cpath d='M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 0.75rem center;
      background-size: 1rem;
      padding-right: 2.5rem;
    }

    input:focus, select:focus, textarea:focus {
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.2);
      background: #020617;
    }

    textarea {
      min-height: 5rem;
      resize: vertical;
      line-height: 1.5;
    }

    .btn-row {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      justify-content: flex-end;
      margin-top: 0.5rem;
    }

    .btn {
      border-radius: 999px;
      padding: 0.75rem 1.25rem;
      border: none;
      font-size: clamp(0.85rem, 2.5vw, 0.95rem);
      font-weight: 500;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      white-space: nowrap;
      min-height: 2.75rem;
      transition: all 0.2s ease;
      flex: 1;
      min-width: 8rem;
    }
    
    @media (min-width: 480px) {
      .btn {
        flex: 0 1 auto;
      }
    }

    .btn:active {
      transform: scale(0.95);
    }

    .btn-primary {
      background: linear-gradient(135deg, #2563eb, #4f46e5);
      color: white;
    }

    .btn-secondary {
      background: rgba(15, 23, 42, 0.92);
      border: 1px solid #1f2937;
      color: var(--text);
    }

    .btn-danger {
      background: rgba(239, 68, 68, 0.12);
      border: 1px solid rgba(248, 113, 113, 0.6);
      color: #fecaca;
    }

    .btn-sm {
      padding: 0.5rem 0.75rem;
      font-size: clamp(0.75rem, 2.5vw, 0.85rem);
      min-height: 2.25rem;
      min-width: auto;
    }

    .btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none !important;
    }

    /* Toolbar y filtros responsive */
    .toolbar {
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
      margin-bottom: 1rem;
    }
    
    @media (min-width: 600px) {
      .toolbar {
        flex-direction: row;
        flex-wrap: wrap;
        align-items: center;
        gap: 0.5rem;
      }
    }

    .toolbar-left {
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
      width: 100%;
    }
    
    @media (min-width: 600px) {
      .toolbar-left {
        flex-direction: row;
        flex-wrap: wrap;
        align-items: center;
        flex: 1;
        gap: 0.5rem;
      }
    }

    .toolbar-right {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      width: 100%;
      justify-content: flex-start;
    }
    
    @media (min-width: 600px) {
      .toolbar-right {
        width: auto;
        justify-content: flex-end;
      }
    }

    .input-inline,
    .select-inline {
      width: 100%;
      min-height: 2.5rem;
    }
    
    @media (min-width: 600px) {
      .input-inline {
        max-width: 220px;
        flex: 1;
        min-width: 130px;
      }
      
      .select-inline {
        max-width: 160px;
        min-width: 120px;
      }
    }

    /* Tabla responsive */
    .table-scroll {
      max-height: 420px;
      overflow-y: auto;
      border-radius: 0.8rem;
      border: 1px solid #020617;
      background: #020617;
      overflow-x: auto;
      -webkit-overflow-scrolling: touch;
      margin: 0 -0.5rem;
      padding: 0 0.5rem;
    }
    
    @media (min-width: 480px) {
      .table-scroll {
        margin: 0;
        padding: 0;
      }
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: clamp(0.75rem, 2.5vw, 0.85rem);
      min-width: 768px;
    }

    thead {
      background: rgba(15, 23, 42, 0.98);
      position: sticky;
      top: 0;
      z-index: 10;
    }

    th, td {
      padding: 0.75rem 0.5rem;
      border-bottom: 1px solid #111827;
      text-align: left;
      white-space: nowrap;
    }
    
    @media (min-width: 768px) {
      th, td {
        padding: 0.75rem;
      }
    }

    th {
      font-weight: 500;
      color: var(--muted);
      font-size: clamp(0.75rem, 2.5vw, 0.85rem);
    }

    tbody tr:hover {
      background: rgba(15, 23, 42, 0.9);
    }

    tbody tr:active {
      background: rgba(37, 99, 235, 0.1);
    }

    .status-chip {
      font-size: clamp(0.7rem, 2vw, 0.75rem);
      padding: 0.25rem 0.75rem;
      border-radius: 999px;
      border: 1px solid transparent;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 0.25rem;
      min-width: 5rem;
      text-align: center;
    }

    .status-optimo {
      background: rgba(22, 163, 74, 0.15);
      border-color: rgba(34, 197, 94, 0.6);
      color: #bbf7d0;
    }

    .status-regular {
      background: rgba(234, 179, 8, 0.12);
      border-color: rgba(250, 204, 21, 0.6);
      color: #fef3c7;
    }

    .status-critico {
      background: rgba(239, 68, 68, 0.12);
      border-color: rgba(248, 113, 113, 0.6);
      color: #fecaca;
    }

    .empty-state {
      text-align: center;
      padding: 2rem 1rem;
      font-size: clamp(0.85rem, 2.5vw, 0.95rem);
      color: var(--muted);
      line-height: 1.5;
    }

    .footer {
      margin-top: 1rem;
      font-size: clamp(0.75rem, 2.5vw, 0.85rem);
      color: var(--muted);
      text-align: center;
      padding: 0.5rem;
    }
    
    @media (min-width: 600px) {
      .footer {
        text-align: right;
      }
    }

    /* Backup Panel responsive */
    .backup-panel {
      background: rgba(30, 41, 59, 0.5);
      border: 1px solid var(--card-border);
      border-radius: 10px;
      padding: 1rem;
      margin-top: 1.5rem;
    }

    .backup-title {
      font-size: clamp(0.85rem, 2.5vw, 0.95rem);
      font-weight: 600;
      margin-bottom: 0.75rem;
      color: var(--text);
    }

    .backup-buttons {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }
    
    @media (min-width: 480px) {
      .backup-buttons {
        flex-direction: row;
        flex-wrap: wrap;
        gap: 0.5rem;
      }
    }

    .backup-btn {
      padding: 0.75rem 1rem;
      border-radius: 0.75rem;
      border: 1px solid var(--card-border);
      background: rgba(15, 23, 42, 0.8);
      color: var(--text);
      cursor: pointer;
      font-size: clamp(0.85rem, 2.5vw, 0.95rem);
      transition: all 0.3s ease;
      min-height: 2.75rem;
      flex: 1;
      text-align: center;
    }
    
    @media (min-width: 480px) {
      .backup-btn {
        flex: 0 1 auto;
        min-width: 10rem;
      }
    }

    .backup-btn:active {
      transform: scale(0.95);
    }

    .backup-btn:hover {
      background: rgba(30, 41, 59, 0.8);
    }

    .backup-btn.success {
      border-color: var(--accent);
      color: var(--accent);
    }

    .backup-btn.warning {
      border-color: var(--warning);
      color: var(--warning);
    }

    /* Loader para app */
    .loader {
      border: 3px solid rgba(255, 255, 255, 0.1);
      border-radius: 50%;
      border-top: 3px solid var(--primary);
      width: 1.5rem;
      height: 1.5rem;
      animation: spin 1s linear infinite;
      display: inline-block;
    }

    /* Toast Notifications mobile-friendly */
    .toast {
      position: fixed;
      bottom: max(1rem, var(--safe-bottom));
      left: 1rem;
      right: 1rem;
      padding: 1rem;
      border-radius: 0.75rem;
      color: white;
      font-size: clamp(0.85rem, 2.5vw, 0.95rem);
      z-index: 1000;
      animation: slideInUp 0.3s ease;
      max-width: 100%;
      text-align: center;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
    }
    
    @media (min-width: 768px) {
      .toast {
        left: auto;
        right: 1rem;
        bottom: 1rem;
        max-width: 300px;
        text-align: left;
      }
    }

    .toast.success {
      background: var(--accent);
    }

    .toast.error {
      background: var(--danger);
    }

    .toast.warning {
      background: var(--warning);
    }

    /* ========== ANIMATIONS ========== */
    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    @keyframes gradientMove {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    @keyframes slideInUp {
      from {
        transform: translateY(100%);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }

    /* ========== MOBILE-SPECIFIC ENHANCEMENTS ========== */
    /* Mejorar toques en m√≥viles */
    @media (hover: none) and (pointer: coarse) {
      .btn, .backup-btn, .logout-btn, .toggle-password {
        min-height: 3rem;
        padding: 0.875rem 1.25rem;
      }
      
      input, select, textarea {
        min-height: 3rem;
        font-size: 1rem;
      }
      
      /* Aumentar √°rea de toque */
      button[data-accion] {
        min-height: 2.5rem;
        min-width: 3.5rem;
      }
      
      /* Espaciado adicional para inputs en iOS */
      input[type="date"] {
        min-height: 3rem;
      }
    }

    /* Prevenir zoom en inputs en iOS */
    @supports (-webkit-touch-callout: none) {
      input, select, textarea {
        font-size: 16px !important; /* Previene zoom autom√°tico en iOS */
      }
    }

    /* Mejorar scroll en iOS */
    .table-scroll, .login-card {
      -webkit-overflow-scrolling: touch;
    }

    /* Ajustar posici√≥n segura para iPhone X+ */
    @supports (padding: max(0px)) {
      body, .login-screen {
        padding-left: max(0.75rem, var(--safe-left));
        padding-right: max(0.75rem, var(--safe-right));
        padding-top: max(0.75rem, var(--safe-top));
        padding-bottom: max(0.75rem, var(--safe-bottom));
      }
    }
  </style>
</head>
<body>
  <!-- ========== PANTALLA DE LOGIN ========== -->
  <div class="login-screen" id="loginScreen">
    <div class="login-card">
      <div class="hotel-branding">
        <div class="hotel-logo">üè®</div>
        <h1 class="hotel-name">Pacifica Resort Ixtapa</h1>
        <p class="hotel-subtitle">Departamento de Sistemas</p>
      </div>
      
      <div class="system-name">Sistema de Inventario de Activos TI</div>
      
      <div id="errorMessage" class="error-message">
        <!-- Mensajes de error aparecer√°n aqu√≠ -->
      </div>
      
      <form id="loginForm">
        <div class="form-group">
          <label class="form-label" for="username">Usuario Administrador</label>
          <input 
            type="text" 
            id="username" 
            class="form-input" 
            placeholder="Ingresa tu nombre de usuario"
            required
            autofocus
          >
        </div>
        
        <div class="form-group">
          <label class="form-label" for="password">Contrase√±a</label>
          <div class="password-container">
            <input 
              type="password" 
              id="password" 
              class="form-input" 
              placeholder="Ingresa tu contrase√±a"
              required
            >
            <button type="button" class="toggle-password" id="togglePassword">
              üëÅÔ∏è
            </button>
          </div>
        </div>
        
        <button type="submit" class="login-btn" id="loginBtn">
          <span id="btnText">Acceder al Sistema</span>
          <span id="btnLoading" class="loading" style="display: none;"></span>
        </button>
      </form>
      
      <!-- Solo visible durante desarrollo -->
      <div class="credentials-hint" id="devHint">
        <strong>Credenciales para pruebas:</strong><br>
        Usuario: <code>admin@pacifica</code> | Contrase√±a: <code>Pacifica2025</code>
      </div>
      
      <div class="login-footer">
        <p>¬© 2025 Pacifica Resort Ixtapa ¬∑ Solo personal autorizado</p>
        <p>Problemas para acceder? Contacta a 
        <a 
          href="https://wa.me/527551008478" 
          target="_blank" 
          style="color: var(--primary); text-decoration: none; font-weight: 500;"
          title="Contactar por WhatsApp">Sistemas</a></p>
      </div>
    </div>
  </div>

  <!-- ========== APLICACI√ìN PRINCIPAL ========== -->
  <div class="app-container" id="appContainer">
    <div class="container">
      <!-- Encabezado con info de usuario -->
      <header class="app-header">
        <div class="app-title-area">
          <h1 class="app-title">Inventario de Equipo de C√≥mputo</h1>
          <p class="app-subtitle">
            Sistema web est√°tico para registrar, consultar y exportar el inventario de equipo de c√≥mputo de
            <strong>Pac√≠fica Resort Ixtapa</strong>.
          </p>
        </div>
        <div class="user-info">
          <div class="user-avatar">A</div>
          <div class="user-details">
            <div>Administrador</div>
            <div>Sesi√≥n activa</div>
          </div>
          <button class="logout-btn" id="logoutBtn">Cerrar Sesi√≥n</button>
        </div>
      </header>

      <main class="layout">
        <!-- Columna izquierda: Formulario -->
        <section class="card">
          <div class="card-header">
            <div>
              <h2 class="card-title">Registrar / editar equipo</h2>
              <p class="card-subtitle">Captura la informaci√≥n t√©cnica y de ubicaci√≥n del equipo.</p>
            </div>
          </div>

          <form id="inventory-form">
            <input type="hidden" id="item-id" />

            <div class="form-row">
              <div>
                <label for="categoria">Categor√≠a</label>
                <select id="categoria" required>
                  <option value="">Selecciona una opci√≥n</option>
                  <option value="PC Escritorio">PC Escritorio</option>
                  <option value="Laptop">Laptop</option>
                  <option value="Impresora / Multifuncional">Impresora / Multifuncional</option>
                  <option value="Equipo de Red">Equipo de Red</option>
                  <option value="Tel√©fono IP">Tel√©fono IP</option>
                  <option value="Servidor">Servidor</option>
                  <option value="Punto de Venta / POS">Punto de Venta / POS</option>
                  <option value="Otro">Otro</option>
                </select>
              </div>
              <div>
                <label for="area">√Årea / departamento</label>
                <input id="area" type="text" placeholder="Recepci√≥n, Reservaciones, Administraci√≥n..." required />
              </div>
            </div>

            <div class="form-row">
              <div>
                <label for="marca">Marca</label>
                <input id="marca" type="text" placeholder="Dell, HP, Lenovo, Epson..." required />
              </div>
              <div>
                <label for="modelo">Modelo</label>
                <input id="modelo" type="text" placeholder="Ej: OptiPlex 7090" required />
              </div>
            </div>

            <div class="form-row">
              <div>
                <label for="serie">N√∫mero de serie</label>
                <input id="serie" type="text" placeholder="S/N del fabricante" />
              </div>
              <div>
                <label for="activo">No. de activo / etiqueta hotel</label>
                <input id="activo" type="text" placeholder="C√≥digo interno del hotel" />
              </div>
            </div>

            <div class="form-row">
              <div>
                <label for="ip">Direcci√≥n IP (si aplica)</label>
                <input id="ip" type="text" placeholder="192.168.x.x" />
              </div>
              <div>
                <label for="fecha">Fecha de alta / adquisici√≥n</label>
                <input id="fecha" type="date" />
              </div>
            </div>

            <div class="form-row">
              <div>
                <label for="estado">Estado del equipo</label>
                <select id="estado" required>
                  <option value="">Selecciona una opci√≥n</option>
                  <option value="√ìptimo">√ìptimo</option>
                  <option value="Regular">Regular</option>
                  <option value="Cr√≠tico">Cr√≠tico</option>
                </select>
              </div>
              <div>
                <label for="usuario">Usuario / responsable</label>
                <input id="usuario" type="text" placeholder="Nombre del usuario o √°rea responsable" />
              </div>
            </div>

            <div>
              <label for="notas">Notas t√©cnicas / observaciones</label>
              <textarea id="notas" placeholder="Detalles de hardware, software, licencias, incidencias recientes, etc."></textarea>
            </div>

            <div class="btn-row">
              <button type="button" class="btn btn-secondary" id="btn-cancelar" disabled>Cancelar edici√≥n</button>
              <button type="submit" class="btn btn-primary" id="btn-guardar">
                Guardar equipo
              </button>
            </div>
          </form>

          <!-- Panel de Backup -->
          <div class="backup-panel">
            <div class="backup-title">üîí Copias de Seguridad</div>
            <div class="backup-buttons">
              <button class="backup-btn success" id="btnBackupNow">Crear Backup Ahora</button>
              <button class="backup-btn warning" id="btnRestoreBackup">Restaurar Backup</button>
              <button class="backup-btn" id="btnExportBackup">Exportar a Excel</button>
            </div>
          </div>
        </section>

        <!-- Columna derecha: Tabla -->
        <section class="card">
          <div class="card-header">
            <div>
              <h2 class="card-title">Inventario registrado</h2>
              <p class="card-subtitle">
                Consulta, filtra y exporta el inventario guardado en este navegador.
              </p>
            </div>
            <div class="pill">
              Total de equipos: <span id="total-equipos">0</span>
            </div>
          </div>

          <div class="toolbar">
            <div class="toolbar-left">
              <input
                id="busqueda"
                type="text"
                class="input-inline"
                placeholder="Buscar por marca, modelo, √°rea, usuario..."
              />
              <select id="filtro-categoria" class="select-inline">
                <option value="">Todas las categor√≠as</option>
                <option value="PC Escritorio">PC Escritorio</option>
                <option value="Laptop">Laptop</option>
                <option value="Impresora / Multifuncional">Impresora / Multifuncional</option>
                <option value="Equipo de Red">Equipo de Red</option>
                <option value="Tel√©fono IP">Tel√©fono IP</option>
                <option value="Servidor">Servidor</option>
                <option value="Punto de Venta / POS">Punto de Venta / POS</option>
                <option value="Otro">Otro</option>
              </select>
              <select id="filtro-estado" class="select-inline">
                <option value="">Todos los estados</option>
                <option value="√ìptimo">√ìptimo</option>
                <option value="Regular">Regular</option>
                <option value="Cr√≠tico">Cr√≠tico</option>
              </select>
            </div>
            <div class="toolbar-right">
              <button id="btn-exportar" class="btn btn-secondary btn-sm">
                Exportar CSV
              </button>
              <button id="btn-semilla" class="btn btn-secondary btn-sm">
                Cargar ejemplo
              </button>
            </div>
          </div>

          <div class="table-scroll">
            <table>
              <thead>
                <tr>
                  <th>Categor√≠a</th>
                  <th>√Årea</th>
                  <th>Marca / modelo</th>
                  <th>Activo</th>
                  <th>IP</th>
                  <th>Estado</th>
                  <th>Usuario</th>
                  <th>Acciones</th>
                </tr>
              </thead>
              <tbody id="tabla-cuerpo">
                <!-- Filas din√°micas -->
              </tbody>
            </table>
            <div id="empty-state" class="empty-state" style="display: none;">
              No hay equipos registrados todav√≠a. Usa el formulario de la izquierda para agregar el primero.
            </div>
          </div>

          <div class="footer">
            Inventario de Sistemas ¬∑ Pac√≠fica Resort Ixtapa
          </div>
        </section>
      </main>
    </div>
  </div>

  <script>
    // ============================================
    // CONFIGURACI√ìN Y CONSTANTES
    // ============================================
    const CONFIG = {
      // Credenciales de administrador
      ADMIN_USER: 'admin@pacifica',
      ADMIN_PASS: 'Pacifica2025',
      
      // Claves de almacenamiento
      STORAGE_KEYS: {
        INVENTORY: 'pacifica_inventory_data_v2',
        BACKUPS: 'pacifica_inventory_backups',
        SESSION: 'pacifica_inventory_session'
      },
      
      // Configuraci√≥n de sesi√≥n
      SESSION_TIMEOUT: 60, // minutos
      
      // Configuraci√≥n de backup
      AUTO_BACKUP_INTERVAL: 24 * 60 * 60 * 1000, // 24 horas en milisegundos
      MAX_BACKUPS: 10
    };

    // ============================================
    // VARIABLES GLOBALES
    // ============================================
    let inventario = [];
    let autoBackupInterval;

    // ============================================
    // ELEMENTOS DEL DOM - LOGIN
    // ============================================
    const loginScreen = document.getElementById('loginScreen');
    const appContainer = document.getElementById('appContainer');
    const loginForm = document.getElementById('loginForm');
    const usernameInput = document.getElementById('username');
    const passwordInput = document.getElementById('password');
    const togglePasswordBtn = document.getElementById('togglePassword');
    const loginBtn = document.getElementById('loginBtn');
    const btnText = document.getElementById('btnText');
    const btnLoading = document.getElementById('btnLoading');
    const errorMessage = document.getElementById('errorMessage');
    const devHint = document.getElementById('devHint');
    const logoutBtn = document.getElementById('logoutBtn');

    // ============================================
    // ELEMENTOS DEL DOM - INVENTARIO
    // ============================================
    // Formulario principal
    const form = document.getElementById("inventory-form");
    const inputId = document.getElementById("item-id");
    const inputCategoria = document.getElementById("categoria");
    const inputArea = document.getElementById("area");
    const inputMarca = document.getElementById("marca");
    const inputModelo = document.getElementById("modelo");
    const inputSerie = document.getElementById("serie");
    const inputActivo = document.getElementById("activo");
    const inputIp = document.getElementById("ip");
    const inputFecha = document.getElementById("fecha");
    const inputEstado = document.getElementById("estado");
    const inputUsuario = document.getElementById("usuario");
    const inputNotas = document.getElementById("notas");

    // Tabla y controles
    const tablaCuerpo = document.getElementById("tabla-cuerpo");
    const emptyState = document.getElementById("empty-state");
    const totalEquiposLabel = document.getElementById("total-equipos");
    const busqueda = document.getElementById("busqueda");
    const filtroCategoria = document.getElementById("filtro-categoria");
    const filtroEstado = document.getElementById("filtro-estado");
    const btnExportar = document.getElementById("btn-exportar");
    const btnSemilla = document.getElementById("btn-semilla");
    const btnCancelar = document.getElementById("btn-cancelar");
    const btnGuardar = document.getElementById("btn-guardar");

    // Botones de backup
    const btnBackupNow = document.getElementById('btnBackupNow');
    const btnRestoreBackup = document.getElementById('btnRestoreBackup');
    const btnExportBackup = document.getElementById('btnExportBackup');

    // ============================================
    // FUNCIONES DE AUTENTICACI√ìN
    // ============================================
    function initAuth() {
      // Configurar evento de login
      loginForm.addEventListener('submit', handleLogin);
      
      // Configurar toggle de contrase√±a
      togglePasswordBtn.addEventListener('click', function() {
        const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
        passwordInput.setAttribute('type', type);
        this.textContent = type === 'password' ? 'üëÅÔ∏è' : 'üëÅÔ∏è‚Äçüó®Ô∏è';
      });
      
      // Configurar logout
      logoutBtn.addEventListener('click', handleLogout);
      
      // Ocultar hint de desarrollo en producci√≥n
      if (window.location.hostname !== 'localhost' && !window.location.hostname.includes('127.0.0.1')) {
        devHint.style.display = 'none';
      }
      
      // Verificar sesi√≥n existente
      checkExistingSession();
    }

    function validateCredentials(username, password) {
      return username === CONFIG.ADMIN_USER && password === CONFIG.ADMIN_PASS;
    }

    function createSession() {
      const sessionData = {
        user: CONFIG.ADMIN_USER,
        timestamp: new Date().getTime(),
        expires: new Date().getTime() + (CONFIG.SESSION_TIMEOUT * 60000),
        token: btoa(`${CONFIG.ADMIN_USER}:${Date.now()}`).replace(/=/g, '')
      };
      
      // Guardar en localStorage con encriptaci√≥n b√°sica
      const encryptedSession = btoa(JSON.stringify(sessionData));
      localStorage.setItem(CONFIG.STORAGE_KEYS.SESSION, encryptedSession);
      
      return sessionData.token;
    }

    function checkExistingSession() {
      try {
        const stored = localStorage.getItem(CONFIG.STORAGE_KEYS.SESSION);
        if (!stored) return false;
        
        const sessionData = JSON.parse(atob(stored));
        const now = new Date().getTime();
        
        if (now > sessionData.expires) {
          localStorage.removeItem(CONFIG.STORAGE_KEYS.SESSION);
          return false;
        }
        
        // Sesi√≥n v√°lida, mostrar la app
        showApp();
        return true;
      } catch (e) {
        localStorage.removeItem(CONFIG.STORAGE_KEYS.SESSION);
        return false;
      }
    }

    async function handleLogin(e) {
      e.preventDefault();
      
      const username = usernameInput.value.trim();
      const password = passwordInput.value;
      
      // Mostrar estado de carga
      btnText.style.display = 'none';
      btnLoading.style.display = 'inline-block';
      loginBtn.disabled = true;
      
      // Simular tiempo de procesamiento
      await new Promise(resolve => setTimeout(resolve, 800));
      
      if (validateCredentials(username, password)) {
        // Crear sesi√≥n
        createSession();
        
        // Mostrar √©xito
        loginBtn.style.background = 'linear-gradient(135deg, var(--accent), #16a34a)';
        btnText.textContent = '‚úì Acceso concedido';
        btnText.style.display = 'inline-block';
        btnLoading.style.display = 'none';
        
        // Mostrar la app despu√©s de breve pausa
        setTimeout(() => {
          showApp();
        }, 500);
        
      } else {
        // Mostrar error
        errorMessage.textContent = 'Credenciales incorrectas. Verifica tu usuario y contrase√±a.';
        errorMessage.style.display = 'block';
        
        // Restaurar bot√≥n
        btnText.style.display = 'inline-block';
        btnLoading.style.display = 'none';
        loginBtn.disabled = false;
        
        // Efecto de error
        usernameInput.style.borderColor = 'var(--danger)';
        passwordInput.style.borderColor = 'var(--danger)';
        
        setTimeout(() => {
          usernameInput.style.borderColor = '';
          passwordInput.style.borderColor = '';
        }, 2000);
      }
    }

    function handleLogout() {
      // Detener backup autom√°tico
      if (autoBackupInterval) {
        clearInterval(autoBackupInterval);
      }
      
      // Limpiar sesi√≥n
      localStorage.removeItem(CONFIG.STORAGE_KEYS.SESSION);
      
      // Mostrar mensaje
      showToast('Sesi√≥n cerrada correctamente', 'warning');
      
      // Volver al login
      setTimeout(() => {
        loginScreen.style.display = 'flex';
        appContainer.style.display = 'none';
        
        // Limpiar formulario de login
        usernameInput.value = '';
        passwordInput.value = '';
        passwordInput.setAttribute('type', 'password');
        togglePasswordBtn.textContent = 'üëÅÔ∏è';
        errorMessage.style.display = 'none';
        
        // Restaurar bot√≥n de login
        loginBtn.style.background = 'linear-gradient(135deg, var(--primary), var(--primary-dark))';
        btnText.textContent = 'Acceder al Sistema';
        loginBtn.disabled = false;
      }, 500);
    }

    function showApp() {
      loginScreen.style.display = 'none';
      appContainer.style.display = 'block';
      
      // Iniciar el sistema de inventario
      initInventorySystem();
      
      // Iniciar backup autom√°tico
      startAutoBackup();
    }

    // ============================================
    // SISTEMA DE INVENTARIO
    // ============================================
    function initInventorySystem() {
      // Cargar inventario desde localStorage
      cargarInventario();
      
      // Configurar eventos del formulario
      form.addEventListener("submit", handleFormSubmit);
      btnCancelar.addEventListener("click", () => modoEdicion(false));
      
      // Configurar eventos de la tabla
      tablaCuerpo.addEventListener("click", handleTableClick);
      
      // Configurar filtros
      [busqueda, filtroCategoria, filtroEstado].forEach((el) => {
        el.addEventListener("input", renderTabla);
        el.addEventListener("change", renderTabla);
      });
      
      // Configurar botones de exportaci√≥n
      btnExportar.addEventListener("click", exportToCSV);
      btnSemilla.addEventListener("click", loadSampleData);
      
      // Configurar botones de backup
      btnBackupNow.addEventListener('click', createManualBackup);
      btnRestoreBackup.addEventListener('click', restoreFromBackup);
      btnExportBackup.addEventListener('click', exportToExcel);
    }

    function cargarInventario() {
      try {
        const data = localStorage.getItem(CONFIG.STORAGE_KEYS.INVENTORY);
        inventario = data ? JSON.parse(data) : [];
        
        // Si no hay datos, intentar cargar del √∫ltimo backup
        if (inventario.length === 0) {
          const backups = getBackups();
          if (backups.length > 0) {
            const latestBackup = backups[0];
            if (confirm('No se encontraron datos actuales. ¬øDeseas restaurar del √∫ltimo backup?')) {
              inventario = latestBackup.data;
              guardarInventario();
              showToast('Datos restaurados del backup', 'success');
            }
          }
        }
      } catch (e) {
        console.error("Error al leer localStorage:", e);
        inventario = [];
      }
      renderTabla();
    }

    function guardarInventario() {
      try {
        localStorage.setItem(CONFIG.STORAGE_KEYS.INVENTORY, JSON.stringify(inventario));
      } catch (e) {
        console.error("Error al guardar en localStorage:", e);
        showToast('Error al guardar datos', 'error');
      }
    }

    function limpiarFormulario() {
      inputId.value = "";
      inputCategoria.value = "";
      inputArea.value = "";
      inputMarca.value = "";
      inputModelo.value = "";
      inputSerie.value = "";
      inputActivo.value = "";
      inputIp.value = "";
      inputFecha.value = "";
      inputEstado.value = "";
      inputUsuario.value = "";
      inputNotas.value = "";
    }

    function modoEdicion(activado) {
      if (activado) {
        btnCancelar.disabled = false;
        btnGuardar.textContent = "Actualizar equipo";
      } else {
        btnCancelar.disabled = true;
        btnGuardar.textContent = "Guardar equipo";
        limpiarFormulario();
      }
    }

    function estadoClass(estado) {
      if (estado === "√ìptimo") return "status-chip status-optimo";
      if (estado === "Regular") return "status-chip status-regular";
      if (estado === "Cr√≠tico") return "status-chip status-critico";
      return "status-chip";
    }

    function renderTabla() {
      const texto = busqueda.value.toLowerCase().trim();
      const cat = filtroCategoria.value;
      const est = filtroEstado.value;

      let filtrados = inventario.filter((item) => {
        const matchTexto =
          !texto ||
          (item.categoria || "").toLowerCase().includes(texto) ||
          (item.area || "").toLowerCase().includes(texto) ||
          (item.marca || "").toLowerCase().includes(texto) ||
          (item.modelo || "").toLowerCase().includes(texto) ||
          (item.usuario || "").toLowerCase().includes(texto);

        const matchCategoria = !cat || item.categoria === cat;
        const matchEstado = !est || item.estado === est;

        return matchTexto && matchCategoria && matchEstado;
      });

      tablaCuerpo.innerHTML = "";

      if (filtrados.length === 0) {
        emptyState.style.display = "block";
      } else {
        emptyState.style.display = "none";

        filtrados.forEach((item) => {
          const tr = document.createElement("tr");

          tr.innerHTML = `
            <td>${item.categoria || ""}</td>
            <td>${item.area || ""}</td>
            <td>
              <div><strong>${item.marca || ""}</strong></div>
              <div style="font-size: 0.75rem; color: #9ca3af;">${item.modelo || ""}</div>
            </td>
            <td>${item.activo || ""}</td>
            <td style="font-size: 0.75rem;">${item.ip || ""}</td>
            <td>
              <span class="${estadoClass(item.estado)}">${item.estado || ""}</span>
            </td>
            <td style="font-size: 0.75rem;">${item.usuario || ""}</td>
            <td>
              <div style="display:flex; gap:0.25rem; flex-wrap:wrap;">
                <button class="btn btn-secondary btn-sm" data-accion="editar" data-id="${item.id}">Editar</button>
                <button class="btn btn-danger btn-sm" data-accion="eliminar" data-id="${item.id}">Eliminar</button>
              </div>
            </td>
          `;
          tablaCuerpo.appendChild(tr);
        });
      }

      totalEquiposLabel.textContent = inventario.length;
    }

    function handleFormSubmit(e) {
      e.preventDefault();

      const payload = {
        id: inputId.value ? Number(inputId.value) : Date.now(),
        categoria: inputCategoria.value,
        area: inputArea.value.trim(),
        marca: inputMarca.value.trim(),
        modelo: inputModelo.value.trim(),
        serie: inputSerie.value.trim(),
        activo: inputActivo.value.trim(),
        ip: inputIp.value.trim(),
        fecha: inputFecha.value,
        estado: inputEstado.value,
        usuario: inputUsuario.value.trim(),
        notas: inputNotas.value.trim(),
      };

      if (!payload.categoria || !payload.area || !payload.marca || !payload.modelo || !payload.estado) {
        showToast('Por favor completa los campos requeridos', 'warning');
        return;
      }

      if (inputId.value) {
        const index = inventario.findIndex((i) => i.id === payload.id);
        if (index !== -1) {
          inventario[index] = payload;
          showToast('Equipo actualizado correctamente', 'success');
        }
      } else {
        inventario.push(payload);
        showToast('Equipo agregado al inventario', 'success');
      }

      guardarInventario();
      renderTabla();
      modoEdicion(false);
    }

    function handleTableClick(e) {
      const btn = e.target.closest("button");
      if (!btn) return;

      const accion = btn.getAttribute("data-accion");
      const id = Number(btn.getAttribute("data-id"));
      const item = inventario.find((i) => i.id === id);
      if (!item) return;

      if (accion === "editar") {
        inputId.value = item.id;
        inputCategoria.value = item.categoria || "";
        inputArea.value = item.area || "";
        inputMarca.value = item.marca || "";
        inputModelo.value = item.modelo || "";
        inputSerie.value = item.serie || "";
        inputActivo.value = item.activo || "";
        inputIp.value = item.ip || "";
        inputFecha.value = item.fecha || "";
        inputEstado.value = item.estado || "";
        inputUsuario.value = item.usuario || "";
        inputNotas.value = item.notas || "";
        modoEdicion(true);
        window.scrollTo({ top: 0, behavior: "smooth" });
      }

      if (accion === "eliminar") {
        if (confirm("¬øSeguro que deseas eliminar este equipo del inventario?")) {
          inventario = inventario.filter((i) => i.id !== id);
          guardarInventario();
          renderTabla();
          showToast('Equipo eliminado correctamente', 'success');
        }
      }
    }

    function exportToCSV() {
      if (inventario.length === 0) {
        showToast('No hay equipos para exportar', 'warning');
        return;
      }

      const encabezados = [
        "ID", "Categor√≠a", "√Årea", "Marca", "Modelo", "N√∫mero de serie",
        "No. activo", "IP", "Fecha alta", "Estado", "Usuario", "Notas"
      ];

      const filas = inventario.map((item) => [
        item.id, item.categoria || "", item.area || "", item.marca || "",
        item.modelo || "", item.serie || "", item.activo || "", item.ip || "",
        item.fecha || "", item.estado || "", item.usuario || "",
        (item.notas || "").replace(/\n/g, " ")
      ]);

      const data = [encabezados, ...filas]
        .map((fila) => fila.map(campo => `"${String(campo).replace(/"/g, '""')}"`).join(","))
        .join("\n");

      downloadFile(data, 'inventario_pacifica_resort_ixtapa.csv', 'text/csv');
      showToast('CSV exportado correctamente', 'success');
    }

    function loadSampleData() {
      if (inventario.length > 0 && !confirm("Esto agregar√° ejemplos al inventario actual. ¬øDeseas continuar?")) {
        return;
      }

      const base = Date.now();
      const ejemplos = [
        {
          id: base,
          categoria: "PC Escritorio",
          area: "Recepci√≥n",
          marca: "Dell",
          modelo: "OptiPlex 7090",
          serie: "SN-DEL-REC-001",
          activo: "PAC-IT-001",
          ip: "192.168.10.21",
          fecha: "2023-07-15",
          estado: "√ìptimo",
          usuario: "Recepci√≥n Front Desk",
          notas: "Equipo principal para PMS del hotel, Windows 11 Pro, Office 365 licenciado."
        },
        {
          id: base + 1,
          categoria: "Laptop",
          area: "Gerencia General",
          marca: "HP",
          modelo: "EliteBook 840 G7",
          serie: "SN-HP-GER-002",
          activo: "PAC-IT-015",
          ip: "192.168.10.35",
          fecha: "2022-03-10",
          estado: "√ìptimo",
          usuario: "Gerencia General",
          notas: "Uso administrativo, acceso VPN a sistema corporativo, respaldos semanales."
        },
        {
          id: base + 2,
          categoria: "Impresora / Multifuncional",
          area: "Administraci√≥n",
          marca: "Epson",
          modelo: "WorkForce Pro WF-4740",
          serie: "SN-EPS-ADM-003",
          activo: "PAC-IT-030",
          ip: "192.168.10.55",
          fecha: "2021-11-02",
          estado: "Regular",
          usuario: "Administraci√≥n",
          notas: "Reporta atascos de papel espor√°dicos; requiere mantenimiento preventivo."
        }
      ];

      inventario = inventario.concat(ejemplos);
      guardarInventario();
      renderTabla();
      showToast('Datos de ejemplo cargados', 'success');
    }

    // ============================================
    // SISTEMA DE BACKUP
    // ============================================
    function getBackups() {
      try {
        const backups = localStorage.getItem(CONFIG.STORAGE_KEYS.BACKUPS);
        return backups ? JSON.parse(backups) : [];
      } catch (e) {
        return [];
      }
    }

    function saveBackups(backups) {
      localStorage.setItem(CONFIG.STORAGE_KEYS.BACKUPS, JSON.stringify(backups));
    }

    function createBackup() {
      const backup = {
        id: Date.now(),
        timestamp: new Date().toISOString(),
        hotel: 'Pacifica Resort Ixtapa',
        itemCount: inventario.length,
        data: [...inventario] // Copia profunda
      };

      let backups = getBackups();
      
      // Agregar nuevo backup al inicio
      backups.unshift(backup);
      
      // Limitar n√∫mero de backups
      if (backups.length > CONFIG.MAX_BACKUPS) {
        backups = backups.slice(0, CONFIG.MAX_BACKUPS);
      }
      
      saveBackups(backups);
      return backup;
    }

    function createManualBackup() {
      const backup = createBackup();
      downloadFile(
        JSON.stringify(backup, null, 2),
        `backup_inventario_${new Date().toISOString().split('T')[0]}.json`,
        'application/json'
      );
      showToast(`Backup creado (${backup.itemCount} equipos)`, 'success');
    }

    function restoreFromBackup() {
      const input = document.createElement('input');
      input.type = 'file';
      input.accept = '.json';
      
      input.onchange = (e) => {
        const file = e.target.files[0];
        if (!file) return;
        
        const reader = new FileReader();
        reader.onload = (event) => {
          try {
            const backup = JSON.parse(event.target.result);
            
            if (!backup.data || !Array.isArray(backup.data)) {
              throw new Error('Formato de backup inv√°lido');
            }
            
            if (confirm(`¬øRestaurar backup del ${new Date(backup.timestamp).toLocaleDateString()} con ${backup.data.length} equipos?`)) {
              inventario = backup.data;
              guardarInventario();
              renderTabla();
              showToast(`Backup restaurado (${backup.data.length} equipos)`, 'success');
            }
          } catch (error) {
            showToast('Error al leer el archivo de backup', 'error');
          }
        };
        reader.readAsText(file);
      };
      
      input.click();
    }

    function startAutoBackup() {
      // Crear backup inicial
      if (inventario.length > 0) {
        createBackup();
      }
      
      // Configurar backup autom√°tico peri√≥dico
      autoBackupInterval = setInterval(() => {
        if (inventario.length > 0) {
          const backup = createBackup();
          console.log(`Backup autom√°tico creado: ${backup.itemCount} equipos`);
        }
      }, CONFIG.AUTO_BACKUP_INTERVAL);
    }

    function exportToExcel() {
      if (inventario.length === 0) {
        showToast('No hay equipos para exportar', 'warning');
        return;
      }

      // Crear contenido HTML para Excel
      let html = `
        <!DOCTYPE html>
        <html>
        <head>
          <meta charset="UTF-8">
          <title>Inventario Pac√≠fica Resort Ixtapa</title>
          <style>
            table { border-collapse: collapse; width: 100%; }
            th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
            th { background-color: #2563eb; color: white; }
            tr:nth-child(even) { background-color: #f2f2f2; }
          </style>
        </head>
        <body>
          <h1>Inventario de Equipo de C√≥mputo</h1>
          <h2>Pac√≠fica Resort Ixtapa</h2>
          <p>Generado: ${new Date().toLocaleDateString()}</p>
          <table>
            <tr>
              <th>Categor√≠a</th><th>√Årea</th><th>Marca</th><th>Modelo</th>
              <th>No. Serie</th><th>No. Activo</th><th>IP</th><th>Fecha Alta</th>
              <th>Estado</th><th>Usuario</th><th>Notas</th>
            </tr>
      `;

      inventario.forEach(item => {
        html += `
          <tr>
            <td>${item.categoria || ''}</td>
            <td>${item.area || ''}</td>
            <td>${item.marca || ''}</td>
            <td>${item.modelo || ''}</td>
            <td>${item.serie || ''}</td>
            <td>${item.activo || ''}</td>
            <td>${item.ip || ''}</td>
            <td>${item.fecha || ''}</td>
            <td>${item.estado || ''}</td>
            <td>${item.usuario || ''}</td>
            <td>${(item.notas || '').replace(/\n/g, ' ')}</td>
          </tr>
        `;
      });

      html += `
          </table>
          <p style="margin-top: 20px; color: #666;">
            Total de equipos: ${inventario.length}<br>
            Departamento de Sistemas - Pacifica Resort Ixtapa
          </p>
        </body>
        </html>
      `;

      downloadFile(html, `inventario_pacifica_${new Date().toISOString().split('T')[0]}.html`, 'text/html');
      showToast('Reporte HTML exportado', 'success');
    }

    // ============================================
    // FUNCIONES UTILITARIAS
    // ============================================
    function downloadFile(data, filename, type) {
      const blob = new Blob([data], { type: type });
      const url = URL.createObjectURL(blob);
      const link = document.createElement('a');
      link.href = url;
      link.download = filename;
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
      URL.revokeObjectURL(url);
    }

    function showToast(message, type = 'info') {
      // Eliminar toast anterior si existe
      const existingToast = document.querySelector('.toast');
      if (existingToast) {
        existingToast.remove();
      }
      
      const toast = document.createElement('div');
      toast.className = `toast ${type}`;
      toast.textContent = message;
      document.body.appendChild(toast);
      
      // Auto-eliminar despu√©s de 3 segundos
      setTimeout(() => {
        if (toast.parentNode) {
          toast.remove();
        }
      }, 3000);
    }

    // ============================================
    // INICIALIZACI√ìN
    // ============================================
    document.addEventListener('DOMContentLoaded', () => {
      initAuth();
      
      // Tecla Enter para enviar
      document.addEventListener('keypress', function(e) {
        if (e.key === 'Enter' && document.activeElement === passwordInput) {
          loginForm.dispatchEvent(new Event('submit'));
        }
      });
    });

    // Prevenir que los usuarios salgan sin guardar
    window.addEventListener('beforeunload', (e) => {
      if (inventario.length > 0) {
        // Crear un √∫ltimo backup antes de salir
        createBackup();
      }
    });
  </script>
</body>
</html>
